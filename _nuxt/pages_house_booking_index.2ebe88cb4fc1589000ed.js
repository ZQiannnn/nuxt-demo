webpackJsonp([36],{CmSK:function(e,t,a){"use strict";(function(e){var o=a("Dd8w"),n=a.n(o),s=a("//Fk"),r=a.n(s),l=a("VLjt"),i=a("NYxO");t.a={layout:"notabbar",middleware:"authorizationRequired",components:{PropertyConsultant:l.a},fetch:function(e){return r.a.all([e.store.dispatch("salesconsultant/querySalesConsultant",{projectId:e.query.id})])},data:function(){return{showTypeSelector:!1,showDatePopup:!1,clickDisabled:!1,currentDate:null,wait:60,smsButtonText:"获取验证码",minDate:new Date,form:{title:{value:this.$route.query.name||"",message:null,isvaild:!0},name:{value:"",message:null,isvaild:!0},phoneNumber:{value:"",message:null,isvaild:!0},smsCode:{value:"",message:null,isvaild:!0},date:{value:"",message:null,isvaild:!0}},salesConsultant:"请选择",temp:{salesConsultant:null,SalesConsultantId:null}}},computed:n()({},Object(i.mapGetters)({getSalesResponse:"salesconsultant/getSalesResponse"})),methods:{sendSMSCode:function(){var t=this;this.clickDisabled||this.signleValidator(this.$refs.bookingForm,e.omit(this.form,["smsCode","title","name","date"]))&&this.$store.dispatch("sms/sendSMSCode",{mobile:this.form.phoneNumber.value,type:"appointment"}).then(function(){t.$toast("验证码已发送，请注意查收");var e=[t.wait,t.smsButtonText],a=e[0],o=e[1];t.clickDisabled=!0,t.smsButtonText=t.wait+"秒...";var n=window.setInterval(function(){t.wait--,t.smsButtonText=t.wait+"秒...",t.wait<0&&(window.clearInterval(n),t.smsButtonText=o,t.wait=a,t.clickDisabled=!1)},1e3)}).catch(function(e){t.$toast(e)})},makeBooking:function(){var e=this;this.handleFormSubmit(this.$refs.bookingForm,this.form)&&this.$store.dispatch("authorization/appointment",{phone:this.form.phoneNumber.value,name:this.form.name.value,projectId:this.$route.query.id,sales:this.temp.SalesConsultantId,verificationCode:this.form.smsCode.value,visitTime:this.form.date.value+":00"}).then(function(){e.$toast("预约成功"),e.$router.push({name:"house-detail-id",params:{id:e.$route.query.id},query:{name:e.$route.query.name}})}).catch(function(t){e.$toast(t)})},receiveFromChild:function(e){this.temp.SalesConsultantId=e},onChange:function(e){this.onChangeValidator(e)},getValues:function(e){if(this.showDatePopup=!this.showDatePopup,!this.form.date.value){var t=new Date;this.form.date.value=t.getFullYear()+"-"+(t.getMonth()+1)+"-"+t.getDate()+" "+t.getHours()+":"+t.getMinutes()}},changeDate:function(){this.showDatePopup=!this.showDatePopup},change:function(e,t){var a=e.getValues();this.form.date.value=a[0]+"-"+a[1]+"-"+a[2]+" "+a[3]+":"+a[4]},closeDataPopup:function(){this.showDatePopup=!this.showDatePopup}}}}).call(t,a("M4fF"))},IxJk:function(e,t,a){"use strict";(function(e){a("NYxO");var o=a("NFYZ");t.a={name:"timesshop-propertyconsultant",props:{propertyConsultantSource:{type:Object,required:!0}},data:function(){return{showPropertyConsultant:!1,getDefaultSelectValue:"请选择",propertyConsultantSelected:null}},computed:{getSalesConsultantList:function(){return e.map(this.propertyConsultantSource.data,"salesName")}},mounted:function(){if(this.propertyConsultantSource&&this.propertyConsultantSource.data&&this.propertyConsultantSource.data.length){var e=o.a.randomNum(0,this.propertyConsultantSource.data.length-1),t=this.propertyConsultantSource.data[e];this.propertyConsultantSelected=t.salesName,this.$emit("receiveFromChild",t.salesId),this.$store.dispatch("salesconsultant/setTempSales",{salesName:t.salesName,salesId:t.salesId})}},methods:{propertyConsultantPickerOnConfirm:function(t,a){if(this.showPropertyConsultant=!this.showPropertyConsultant,this.propertyConsultantSelected!==t){var o=e.head(e.filter(this.propertyConsultantSource.data,{salesName:t})).salesId;this.propertyConsultantSelected=t,this.$emit("receiveFromChild",o),this.$store.dispatch("salesconsultant/setTempSales",{salesName:t,salesId:o})}}}}}).call(t,a("M4fF"))},JSCI:function(e,t,a){"use strict";var o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"house-booking"}},[a("van-nav-bar",{attrs:{"left-arrow":"",title:"预约看房",id:"navbar"},on:{"click-left":function(t){e.$router.back()}}}),a("van-cell-group",{staticClass:"cell-group"},[a("form",{ref:"bookingForm",on:{submit:function(e){e.preventDefault()}}},[a("van-field",{attrs:{clearable:"",label:"预约项目",name:"title","error-message":e.form.title.isvaild?"":e.form.title.message,placeholder:"请输入项目名称",disabled:""},model:{value:e.form.title.value,callback:function(t){e.$set(e.form.title,"value","string"==typeof t?t.trim():t)},expression:"form.title.value"}}),a("van-field",{attrs:{clearable:"",label:"姓名",name:"name","error-message":e.form.name.isvaild?"":e.form.name.message,placeholder:"请输入姓名"},model:{value:e.form.name.value,callback:function(t){e.$set(e.form.name,"value","string"==typeof t?t.trim():t)},expression:"form.name.value"}}),a("van-field",{attrs:{clearable:"",label:"手机号",name:"phoneNumber","error-message":e.form.phoneNumber.isvaild?"":e.form.phoneNumber.message,placeholder:"请输入手机号"},model:{value:e.form.phoneNumber.value,callback:function(t){e.$set(e.form.phoneNumber,"value","string"==typeof t?t.trim():t)},expression:"form.phoneNumber.value"}}),a("van-field",{class:e.form.date.isvaild?"":"is-danger",attrs:{clearable:"",label:"预约时间",name:"date",autocomplete:"on",type:"type",readonly:"readonly",placeholder:"填写预约日期"},on:{change:e.onChange,click:e.changeDate},model:{value:e.form.date.value,callback:function(t){e.$set(e.form.date,"value","string"==typeof t?t.trim():t)},expression:"form.date.value"}}),a("van-field",{attrs:{name:"smsCode",center:"",clearable:"","error-message":e.form.smsCode.isvaild?"":e.form.smsCode.message,label:"短信验证码",placeholder:"请输入短信验证码"},model:{value:e.form.smsCode.value,callback:function(t){e.$set(e.form.smsCode,"value","string"==typeof t?t.trim():t)},expression:"form.smsCode.value"}},[a("van-button",{attrs:{slot:"button",size:"small",type:"danger",disabled:e.clickDisabled},on:{click:e.sendSMSCode},slot:"button"},[e._v(e._s(e.smsButtonText))])],1),a("van-popup",{attrs:{position:"bottom"},model:{value:e.showDatePopup,callback:function(t){e.showDatePopup=t},expression:"showDatePopup"}},[a("van-datetime-picker",{attrs:{type:"datetime","min-date":e.minDate},on:{cancel:e.closeDataPopup,confirm:e.getValues,change:e.change},model:{value:e.currentDate,callback:function(t){e.currentDate=t},expression:"currentDate"}})],1)],1)]),a("PropertyConsultant",{attrs:{propertyConsultantSource:e.getSalesResponse},on:{receiveFromChild:e.receiveFromChild}}),e._m(0),a("div",{staticClass:"button-section"},[a("van-button",{attrs:{type:"danger",block:"",size:"normal"},on:{click:e.makeBooking}},[e._v("立即预约")])],1)],1)};o._withStripped=!0;var n={render:o,staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("p",{staticClass:"description"},[this._v("\n\t\t\t客服人员会在预约成功后"),t("span",[this._v("12小时内与您联系")]),this._v(", 请保持电话通畅\n\t\t")])}]};t.a=n},VLjt:function(e,t,a){"use strict";var o=a("IxJk"),n=a("X9gf"),s=a("VU/8")(o.a,n.a,!1,null,null,null);s.options.__file="components\\house\\PropertyConsultant.vue",t.a=s.exports},X9gf:function(e,t,a){"use strict";var o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"property-consultant"}},[a("van-cell-group",[a("van-cell",{attrs:{title:"置业顾问","is-link":"",value:e.propertyConsultantSelected||e.getDefaultSelectValue+"置业顾问"},on:{click:function(t){e.showPropertyConsultant=!0}}})],1),a("van-popup",{attrs:{position:"bottom"},model:{value:e.showPropertyConsultant,callback:function(t){e.showPropertyConsultant=t},expression:"showPropertyConsultant"}},[a("van-picker",{attrs:{"show-toolbar":"",columns:e.getSalesConsultantList},on:{confirm:e.propertyConsultantPickerOnConfirm,cancel:function(t){e.showPropertyConsultant=!1}}})],1)],1)};o._withStripped=!0;var n={render:o,staticRenderFns:[]};t.a=n},lF4h:function(e,t,a){(e.exports=a("FZ+f")(!1)).push([e.i,"\n#house-booking .description[data-v-b47816c6] {\n  padding: 15PX;\n  font-size: 0.69333rem;\n}\n#house-booking .description span[data-v-b47816c6] {\n    color: #BA1C28;\n}\n#house-booking .cell-group[data-v-b47816c6] {\n  margin-bottom: 15PX;\n}\n#house-booking .button-section[data-v-b47816c6] {\n  margin: 4rem 0.93333rem 0 0.93333rem;\n}\n",""])},niWc:function(e,t,a){var o=a("lF4h");"string"==typeof o&&(o=[[e.i,o,""]]),o.locals&&(e.exports=o.locals);a("rjj0")("27c8e8da",o,!1,{sourceMap:!1})},nk5N:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=a("CmSK"),n=a("JSCI"),s=!1;var r=function(e){s||(a("sz3x"),a("niWc"))},l=a("VU/8")(o.a,n.a,!1,r,"data-v-b47816c6",null);l.options.__file="pages\\house\\booking\\index.vue",t.default=l.exports},pcd9:function(e,t,a){(e.exports=a("FZ+f")(!1)).push([e.i,"\n.van-field__control:disabled{\n    color: #333 !important;\n    font-weight: 700;\n}\n",""])},sz3x:function(e,t,a){var o=a("pcd9");"string"==typeof o&&(o=[[e.i,o,""]]),o.locals&&(e.exports=o.locals);a("rjj0")("76e17c69",o,!1,{sourceMap:!1})}});