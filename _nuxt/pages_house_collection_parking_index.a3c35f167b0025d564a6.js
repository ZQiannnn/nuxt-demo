webpackJsonp([28],{"3S9N":function(t,e,i){"use strict";var n=function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"house-collection-parking"}},[e("ParkingLayout",{attrs:{apiType:"1",collectionType:!0}})],1)};n._withStripped=!0;var o={render:n,staticRenderFns:[]};e.a=o},"5AGB":function(t,e,i){"use strict";var n=i("Dd8w"),o=i.n(n),s=i("//Fk"),a=i.n(s),r=i("BXFs"),l=i("NYxO");e.a={layout:"notabbar",middleware:"authorizationRequired",components:{ParkingLayout:r.a},fetch:function(t){var e=t.store,i=t.query;return a.a.all([e.dispatch("house/queryHouseDetails",i.id)])},data:function(){return{}},computed:o()({},Object(l.mapGetters)({getHouseDetails:"house/getHouseDetails"})),methods:{}}},BXFs:function(t,e,i){"use strict";var n=i("mPOZ"),o=i("iL7k"),s=!1;var a=function(t){s||i("tp7i")},r=i("VU/8")(n.a,o.a,!1,a,"data-v-62589c6e",null);r.options.__file="components\\house\\ParkingLayout.vue",e.a=r.exports},FEK5:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i("5AGB"),o=i("3S9N"),s=!1;var a=function(t){s||i("f0vc")},r=i("VU/8")(n.a,o.a,!1,a,"data-v-4348c9d2",null);r.options.__file="pages\\house\\collection\\parking\\index.vue",e.default=r.exports},IxJk:function(t,e,i){"use strict";(function(t){i("NYxO");var n=i("NFYZ");e.a={name:"timesshop-propertyconsultant",props:{propertyConsultantSource:{type:Object,required:!0}},data:function(){return{showPropertyConsultant:!1,getDefaultSelectValue:"请选择",propertyConsultantSelected:null}},computed:{getSalesConsultantList:function(){return t.map(this.propertyConsultantSource.data,"salesName")}},mounted:function(){if(this.propertyConsultantSource&&this.propertyConsultantSource.data&&this.propertyConsultantSource.data.length){var t=n.a.randomNum(0,this.propertyConsultantSource.data.length-1),e=this.propertyConsultantSource.data[t];this.propertyConsultantSelected=e.salesName,this.$emit("receiveFromChild",e.salesId),this.$store.dispatch("salesconsultant/setTempSales",{salesName:e.salesName,salesId:e.salesId})}},methods:{propertyConsultantPickerOnConfirm:function(e,i){if(this.showPropertyConsultant=!this.showPropertyConsultant,this.propertyConsultantSelected!==e){var n=t.head(t.filter(this.propertyConsultantSource.data,{salesName:e})).salesId;this.propertyConsultantSelected=e,this.$emit("receiveFromChild",n),this.$store.dispatch("salesconsultant/setTempSales",{salesName:e,salesId:n})}}}}}).call(e,i("M4fF"))},VLjt:function(t,e,i){"use strict";var n=i("IxJk"),o=i("X9gf"),s=i("VU/8")(n.a,o.a,!1,null,null,null);s.options.__file="components\\house\\PropertyConsultant.vue",e.a=s.exports},X9gf:function(t,e,i){"use strict";var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{attrs:{id:"property-consultant"}},[i("van-cell-group",[i("van-cell",{attrs:{title:"置业顾问","is-link":"",value:t.propertyConsultantSelected||t.getDefaultSelectValue+"置业顾问"},on:{click:function(e){t.showPropertyConsultant=!0}}})],1),i("van-popup",{attrs:{position:"bottom"},model:{value:t.showPropertyConsultant,callback:function(e){t.showPropertyConsultant=e},expression:"showPropertyConsultant"}},[i("van-picker",{attrs:{"show-toolbar":"",columns:t.getSalesConsultantList},on:{confirm:t.propertyConsultantPickerOnConfirm,cancel:function(e){t.showPropertyConsultant=!1}}})],1)],1)};n._withStripped=!0;var o={render:n,staticRenderFns:[]};e.a=o},f0vc:function(t,e,i){var n=i("iwAS");"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);i("rjj0")("2ddd9405",n,!1,{sourceMap:!1})},iL7k:function(t,e,i){"use strict";var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{attrs:{id:"parking-layout"}},[i("van-nav-bar",{attrs:{"left-arrow":"",title:"选取车位",id:"navbar"},on:{"click-left":function(e){t.$router.back()}}}),i("van-cell-group",[i("van-cell",{attrs:{title:"选择楼栋","is-link":"",value:t.building.selected||t.getDefaultSelectValue},on:{click:function(e){t.building.show=!0}}})],1),i("van-popup",{attrs:{position:"bottom"},model:{value:t.building.show,callback:function(e){t.$set(t.building,"show",e)},expression:"building.show"}},[i("van-picker",{attrs:{"show-toolbar":"",columns:t.building.cols},on:{confirm:t.buildingPickerOnConfirm,cancel:function(e){t.building.show=!1}}})],1),i("van-cell-group",[i("van-cell",{attrs:{title:"选择楼层","is-link":"",value:t.floor.selected||t.getDefaultSelectValue},on:{click:function(e){t.floor.show=!0}}})],1),i("van-popup",{attrs:{position:"bottom"},model:{value:t.floor.show,callback:function(e){t.$set(t.floor,"show",e)},expression:"floor.show"}},[i("van-picker",{attrs:{"show-toolbar":"",columns:t.floor.cols},on:{confirm:t.floorPickerOnConfirm,cancel:function(e){t.floor.show=!1}}})],1),i("van-cell-group",[i("van-cell",{attrs:{title:"选择车位","is-link":"",value:t.parking.selected||t.getDefaultSelectValue},on:{click:function(e){t.parking.show=!0}}})],1),i("van-popup",{attrs:{position:"bottom"},model:{value:t.parking.show,callback:function(e){t.$set(t.parking,"show",e)},expression:"parking.show"}},[i("van-picker",{attrs:{"show-toolbar":"",columns:t.parking.cols},on:{confirm:t.parkingPickerOnConfirm,cancel:function(e){t.parking.show=!1}}})],1),i("div",{staticClass:"button-section confirm-buttons"},[i("van-button",{attrs:{type:"danger",size:"normal",block:""},on:{click:t.addParking}},[t._v("确定选择")])],1),i("div",{staticClass:"card-image"},[t.selectedImg?i("figure",{staticClass:"image"},[i("img",{attrs:{src:t.imgPrefix+t.selectedImg}})]):t._e(),i("div",{staticClass:"house-pickup-result"},[i("p",{staticClass:"title is-size-7"},[t._v("已选车位:")]),i("div",{staticClass:"columns is-mobile"},t._l(t.dreamParkingList,function(e,n){return i("div",{key:n,staticClass:"column is-one-third"},[i("span",{staticClass:"tag is-white is-radiusless"},[t._v("\n\t\t\t\t\t\t  "+t._s(e.title)+"\n\t\t\t\t\t\t\t"),i("button",{staticClass:"delete is-small is-danger",on:{click:function(i){t.removeDreamParking(e,n)}}})]),t.collectionType?t._e():i("p",{staticClass:"help has-text-centered"},[t._v("第"+t._s(t._f("changeNum")(n+1))+"意向")])])}))])]),t.terms&&t.hasBinding?i("PropertyConsultant",{attrs:{propertyConsultantSource:t.propertyConsultantSource},on:{receiveFromChild:t.receiveFromChild}}):t._e(),i("div",{staticClass:"button-section2 buttons"},[i("van-button",{class:{"full-width":t.binding},attrs:{type:"danger"},on:{click:t.goToNextStep}},[t._v("下一步")]),t.binding?t._e():i("van-button",{attrs:{type:"default",plain:""},on:{click:t.goToNextStep}},[t._v("跳过")])],1),i("van-popup",{staticClass:"confirm-popup",attrs:{"close-on-click-overlay":!1},model:{value:t.showConfirmPopup,callback:function(e){t.showConfirmPopup=e},expression:"showConfirmPopup"}},[i("div",{staticClass:"confirm-details"},[i("div",{staticClass:"confirm-title"},[i("h3",[t._v("车位收藏成功")])]),i("div",{staticClass:"confirm-content"},[t._v("\n                    您可以在我的-我的收藏-房源收藏中查看收藏的房源情况。\n                ")]),i("div",{staticClass:"button-section"},[i("van-button",{attrs:{block:"",type:"warning"},on:{click:t.makeConfirm}},[t._v("确定")])],1)])])],1)};n._withStripped=!0;var o={render:n,staticRenderFns:[]};e.a=o},iwAS:function(t,e,i){(t.exports=i("FZ+f")(!1)).push([t.i,"",""])},mPOZ:function(t,e,i){"use strict";(function(t){var n=i("woOf"),o=i.n(n),s=i("Xxa5"),a=i.n(s),r=i("exGp"),l=i.n(r),u=i("Dd8w"),c=i.n(u),p=i("VLjt"),d=i("NYxO"),h=i("62+5"),m=i("IdIt");e.a={name:"timesshop-parkinglayout",components:{PropertyConsultant:p.a},props:{subscribeType:{type:Boolean,default:function(){return!1}},pledgeType:{type:Boolean,default:function(){return!1}},collectionType:{type:Boolean,default:function(){return!1}},transferType:{type:Boolean,default:function(){return!1}},terms:{type:Boolean,default:function(){return!1}},limit:{type:Number,default:function(){return 3}},apiType:{type:String,required:!0},propertyConsultantSource:{type:Object},originOrderId:{type:String,default:function(){return""}},binding:{type:Boolean,default:function(){return!1}}},data:function(){return{imgPrefix:"",SalesConsultantId:null,selectedImg:null,building:{selected:null,show:!1,cols:[],selectRoomId:null,isFetchBuilding:!1},floor:{selected:null,show:!1,cols:[]},parking:{selected:null,show:!1,cols:[]},showConfirmPopup:!1,dreamParkingList:[],tempDreamParkingList:[],getDefaultSelectValue:"请选择",iteamIds:[]}},computed:c()({},Object(d.mapGetters)({getListProjects:"projects/getListProjects",getHouseDetails:"house/getHouseDetails",getTempSubscribeSource:"tempSubscribe/getTempSubscribeSource",getTempPledgeSource:"tempPledge/getTempPledgeSource",isAuthentication:"authorization/isAuthentication",getTempSales:"salesconsultant/getTempSales",getTempPledgeRoomList:"tempPledge/getTempPledgeRoomList",getTempSubscribeRoomList:"tempSubscribe/getTempSubscribeRoomList"}),{hasBinding:function(){var t=this.$route.query.binding;return!(!t&&void 0!==t)}}),created:function(){var e=l()(a.a.mark(function e(){var i;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.subscribeType&&this.getTempSubscribeRoomList&&this.getTempSubscribeRoomList.length)){e.next=9;break}return this.building.selectRoomId=this.getTempSubscribeRoomList[0].apartmentId,this,e.next=5,h.a.getRequest(m.a.house.lotBuilding,{roomId:this.building.selectRoomId});case 5:"true"===(i=e.sent).success&&(i.data&&i.data.length?(this.building.cols=t.map(i.data,"bldName"),this.building.isFetchBuilding=!0):this.building.cols=t.map(t.filter(this.getHouseDetails.buildings,{fproductName:"车位"}),"bldName")),e.next=10;break;case 9:this.building.cols=t.map(t.filter(this.getHouseDetails.buildings,{fproductName:"车位"}),"bldName");case 10:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),methods:{receiveFromChild:function(t){this.SalesConsultantId=t},buildingPickerOnConfirm:function(e,i){var n=this,s=t.filter(this.getHouseDetails.buildings,{bldName:e});if(s&&s.length){var a=t.head(s),r=a.bldId,l=a.carportImage;o()(this.building,{show:!1,selected:e}),o()(this.$data,t.omit(this.$options.data(),["building","dreamParkingList"])),this.selectedImg=t.head(l),this.$toast.loading({mask:!1,duration:0,forbidClick:!0,message:"数据加载中..."});var u={projectId:this.$route.query.id,buildingId:r,type:this.apiType};this.subscribeType&&this.building.selectRoomId&&this.building.isFetchBuilding&&o()(u,{roomId:this.building.selectRoomId}),this.$store.dispatch("projects/getSalesStatus",u).then(function(){var e=n.getListProjects.data,i=e.floorList,o=e.roomList;n.floor.cols=i,n.parking.cols=t.map(t.filter(o,{salesStatus:"1"}),"name")}).catch(function(t){n.$toast(t)}).finally(function(){n.$toast.clear()})}},floorPickerOnConfirm:function(t,e){o()(this.floor,{show:!1,selected:t})},parkingPickerOnConfirm:function(t,e){o()(this.parking,{show:!1,selected:t})},goToNextStep:function(){var e=this,i=this.getTempSales.salesName;this.$route.query.binding;void 0!==i&&(this.SalesConsultantId=i);if(this.subscribeType&&"subscribe",this.pledgeType&&"pledge",this.transferType&&"transfer",(this.subscribeType||this.pledgeType)&&this.binding&&!this.dreamParkingList.length)return this.$toast("请先选择车位");if(this.pledgeType&&(!this.getTempPledgeRoomList||!this.getTempPledgeRoomList.length)&&!this.dreamParkingList.length)return this.$toast("请先选择车位");if(this.subscribeType&&(!this.getTempSubscribeRoomList||!this.getTempSubscribeRoomList.length)&&!this.dreamParkingList.length)return this.$toast("请先选择车位");if((this.subscribeType||this.pledgeType)&&null===this.SalesConsultantId)return this.$toast("请选择置业顾问");if(this.getTempSubscribeRoomList&&this.getTempSubscribeRoomList.length){var n=t.head(this.getTempSubscribeRoomList),o=n.buildingId,s=(n.apartmentId,t.head(t.filter(this.getHouseDetails.buildings,{bldId:o})).paymentMethod);if(!s||!s.length)return this.$toast("缺少付款方式，请联系管理员！")}this.collectionType?this.$store.dispatch("wishlist/multiWishlist",{typeId:"APARTMENT",iteamId:this.iteamIds}).then(function(){e.showConfirmPopup=!e.showConfirmPopup}).catch(function(t){e.$toast(t)}):this.subscribeType?this.$store.dispatch("tempSubscribe/setTempSubscribeParkingList",this.dreamParkingList).then(function(){e.goToAuthentication(e.$route.query.id,"subscribe",e.isAuthentication)}):this.transferType?this.$store.dispatch("tempSubscribe/setTempSubscribeParkingList",this.dreamParkingList).then(function(){e.goToAuthentication(e.$route.query.id,"transfer",e.isAuthentication)}):this.pledgeType&&this.$store.dispatch("tempPledge/setTempPledgeParkingList",this.dreamParkingList).then(function(){e.goToAuthentication(e.$route.query.id,"pledge",e.isAuthentication)})},makeConfirm:function(){this.showConfirmPopup=!this.showConfirmPopup,this.$router.push({name:"house-detail-id",params:{id:this.$route.query.id},query:{name:this.getHouseDetails.name}})},removeDreamParking:function(t,e){this.dreamParkingList.splice(e,1)},addParking:function(){var e=this.parking.selected;if(!e)return this.$toast("请先选择车位");if(this.dreamParkingList.length>=this.limit)return this.$toast("最多只能选择"+this.limit+"个意向车位");if(-1!==t.indexOf(this.dreamParkingList,e))return this.$toast("您已选择"+e+"车位");var i=this.getHouseDetails.buildings,n=this.getListProjects.data.roomList,o=t.head(t.filter(i,{bldName:this.building.selected})).bldId,s=t.head(t.filter(n,{name:e})),a=s.id,r=s.floor,l=s.unit;this.dreamParkingList.push({title:e,roomId:a,apartmentId:a,floor:r,unit:l,buildingId:o,originOrderId:this.originOrderId}),this.iteamIds.push(a)}}}}).call(e,i("M4fF"))},pzgo:function(t,e,i){(t.exports=i("FZ+f")(!1)).push([t.i,"\n#parking-layout .button-section2[data-v-62589c6e] {\n  margin-top: 4rem;\n  padding: 0.64rem 2rem;\n}\n#parking-layout .button-section2.buttons[data-v-62589c6e] {\n    -webkit-box-pack: justify !important;\n    -webkit-justify-content: space-between !important;\n            justify-content: space-between !important;\n}\n#parking-layout .button-section2.buttons button[data-v-62589c6e] {\n      width: 7.2rem;\n      margin: 0 0.4rem;\n}\n#parking-layout .button-section2.buttons button.full-width[data-v-62589c6e] {\n        width: 100%;\n}\n#parking-layout .button-section2.buttons button.van-button--default[data-v-62589c6e] {\n        border-color: #BA1C28;\n        color: #BA1C28;\n}\n#parking-layout .button-section[data-v-62589c6e]:not(.confirm-buttons) {\n  margin-top: 0.93333rem;\n}\n#parking-layout .button-section.confirm-buttons[data-v-62589c6e] {\n  margin: 1.33333rem 50PX;\n}\n#parking-layout .house-pickup-result[data-v-62589c6e] {\n  padding: 15PX;\n  background: #fff;\n}\n#parking-layout .house-pickup-result .title[data-v-62589c6e] {\n    margin-bottom: 0.4rem;\n}\n#parking-layout .house-pickup-result .columns[data-v-62589c6e] {\n    margin: 0;\n}\n#parking-layout .house-pickup-result .columns .column span.tag[data-v-62589c6e] {\n      position: relative;\n      border: 1PX solid #dadada;\n      width: 100%;\n      color: #525252;\n      font-size: 0.74667rem;\n}\n#parking-layout .house-pickup-result .columns .column span.tag button[data-v-62589c6e] {\n        position: absolute;\n        top: -6PX;\n        right: -2PX;\n        background: #ff6e6e;\n}\n#parking-layout .house-pickup-result .columns .column p[data-v-62589c6e] {\n      color: #b2b2b2;\n}\n#parking-layout .confirm-popup[data-v-62589c6e] {\n  width: 80%;\n}\n#parking-layout .confirm-popup .confirm-details[data-v-62589c6e] {\n    padding: 15PX;\n}\n#parking-layout .confirm-popup .confirm-details .confirm-title[data-v-62589c6e] {\n      font-size: 0.85333rem;\n      color: #525252;\n      padding: 15PX 0;\n      text-align: center;\n}\n#parking-layout .confirm-popup .confirm-details .confirm-content[data-v-62589c6e] {\n      color: #7A7A7A;\n      font-size: 0.74667rem;\n}\n#parking-layout .confirm-popup .confirm-details .button-section[data-v-62589c6e] {\n      margin-top: 2.13333rem;\n}\n#parking-layout .confirm-popup .confirm-details .button-section .van-button--warning[data-v-62589c6e] {\n        background-color: #BA1C28;\n        border-color: #BA1C28;\n}\n",""])},tp7i:function(t,e,i){var n=i("pzgo");"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);i("rjj0")("432b6e3c",n,!1,{sourceMap:!1})}});