webpackJsonp([13],{"0Svb":function(t,e,o){var n=o("VA55");"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);o("rjj0")("0d1dee91",n,!1,{sourceMap:!1})},"5LWu":function(t,e,o){(t.exports=o("FZ+f")(!1)).push([t.i,"\n#prospectus-layout .description[data-v-4bcf8990] {\n  padding: 0.4rem 0.93333rem;\n  font-size: 0.64rem;\n}\n#prospectus-layout .van-cell-group[data-v-4bcf8990] {\n  margin-bottom: 15px;\n}\n",""])},"5cTm":function(t,e,o){"use strict";var n=o("zd+g"),s=o("av00"),i=!1;var a=function(t){i||o("0Svb")},r=o("VU/8")(n.a,s.a,!1,a,"data-v-0fbf9bc2",null);r.options.__file="components\\common\\Coupon.vue",e.a=r.exports},HDej:function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=o("LY+j"),s=o("LDI8"),i=!1;var a=function(t){i||o("PIZv")},r=o("VU/8")(n.a,s.a,!1,a,"data-v-0be8134a",null);r.options.__file="pages\\house\\subscribe\\parking\\proposal.vue",e.default=r.exports},JjCb:function(t,e,o){"use strict";var n=o("omM4"),s=o("dBdW"),i=!1;var a=function(t){i||o("lTfN")},r=o("VU/8")(n.a,s.a,!1,a,"data-v-4bcf8990",null);r.options.__file="components\\house\\ProspectusLayout.vue",e.a=r.exports},LDI8:function(t,e,o){"use strict";var n=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{attrs:{id:"house-subscribe-parking-proposal"}},[o("van-nav-bar",{attrs:{"left-arrow":"",title:"车位置业计划书",id:"navbar"},on:{"click-left":function(e){t.$router.back()}}}),o("ProspectusLayout",{attrs:{title:"车位"}})],1)};n._withStripped=!0;var s={render:n,staticRenderFns:[]};e.a=s},"LY+j":function(t,e,o){"use strict";(function(t){var n=o("//Fk"),s=o.n(n),i=o("JjCb");e.a={layout:"notabbar",middleware:["authorizationRequired","orderChecking"],fetch:function(e){var o=e.store,n=e.query,i=t.head(o.getters["tempSubscribe/getTempSubscribeParkingList"]),a=i.buildingId,r=i.apartmentId,c=o.getters["salesconsultant/getTempSales"].salesId,u=t.head(t.filter(o.getters["house/getHouseDetails"].buildings,{bldId:a})).paymentMethod,d=t.head(u),l=d.payFormID,p=!1;switch(d.payFormType){case"2":case"4":case"5":case"6":p=!0;break;default:p=!1}return s.a.all([o.dispatch("coupons/myCoupon",{projectId:n.id,buildingId:a}),o.dispatch("orders/calculate",{projectId:n.id,buildingId:a,salesId:c,apartmentId:r,returnMethod:p?t.head(t.map([{code:"DENGEBENXI",name:"等额本息"},{code:"DENGEBENJIN",name:"等额本金"}],"name")):"",paymentMethod:l})])},data:function(){return{}},components:{ProspectusLayout:i.a}}}).call(e,o("M4fF"))},Oaqf:function(t,e,o){(t.exports=o("FZ+f")(!1)).push([t.i,"",""])},PIZv:function(t,e,o){var n=o("Oaqf");"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);o("rjj0")("0cc2be0e",n,!1,{sourceMap:!1})},VA55:function(t,e,o){(t.exports=o("FZ+f")(!1)).push([t.i,"\n.coupon-list .notice[data-v-0fbf9bc2] {\n  font-size: 0.26667rem;\n  padding: 0px 0.93333rem;\n}\n.coupon-list .noresult[data-v-0fbf9bc2] {\n  padding: 0.4rem 0.93333rem;\n  font-size: 0.64rem;\n}\n.coupon-list .box[data-v-0fbf9bc2] {\n  margin: 5PX 0.4rem 0.4rem 0.4rem;\n  padding: 0.4rem 0.66667rem;\n  border: 1PX solid #f8f8f8;\n}\n.coupon-list .box[data-v-0fbf9bc2]:not(.selectable), .coupon-list .box.is-selected[data-v-0fbf9bc2] {\n    border: 1PX solid #FF6E6E;\n}\n.coupon-list .box .type[data-v-0fbf9bc2] {\n    color: #FF6E6E;\n    font-size: 0.58667rem;\n    text-align: right;\n}\n.coupon-list .box .button-section[data-v-0fbf9bc2] {\n    margin: 0 0.93333rem;\n}\n.coupon-list .box .button-section button[data-v-0fbf9bc2] {\n      border-radius: 8PX !important;\n}\n.coupon-list .box .coupon-wrap[data-v-0fbf9bc2] {\n    display: -webkit-box !important;\n    display: -webkit-flex !important;\n    display: flex !important;\n    -webkit-box-align: center !important;\n    -webkit-align-items: center !important;\n            align-items: center !important;\n    margin-bottom: 0.93333rem;\n}\n.coupon-list .box .coupon-wrap .coupon-left[data-v-0fbf9bc2] {\n      margin-right: 0.93333rem;\n      padding-right: 0.93333rem;\n      text-align: center;\n      width: 50%;\n      border-right: 1PX solid #DADADA;\n}\n.coupon-list .box .coupon-wrap .coupon-left strong[data-v-0fbf9bc2] {\n        color: #252525;\n        font-size: 1.33333rem;\n}\n.coupon-list .box .coupon-wrap .coupon-left p[data-v-0fbf9bc2] {\n        color: #B2B2B2;\n        font-size: 0.74667rem;\n}\n.coupon-list .box .coupon-wrap .coupon-right .description[data-v-0fbf9bc2] {\n      color: #252525;\n      font-size: 0.74667rem;\n}\n.coupon-list .box .coupon-wrap .coupon-right .eff-time[data-v-0fbf9bc2] {\n      color: #7A7A7A;\n      font-size: 0.69333rem;\n}\n.coupon-list .box .coupon-wrap .coupon-right .time[data-v-0fbf9bc2] {\n      margin-top: 0.4rem;\n      color: #C40224;\n      font-size: 0.58667rem;\n}\n.coupon-list .confirm-popup[data-v-0fbf9bc2] {\n  width: 80%;\n}\n.coupon-list .confirm-popup .confirm-details[data-v-0fbf9bc2] {\n    padding: 15PX;\n}\n.coupon-list .confirm-popup .confirm-details .confirm-title[data-v-0fbf9bc2] {\n      font-size: 0.85333rem;\n      font-weight: bold;\n      color: #C40224;\n      padding: 15PX 0;\n      text-align: center;\n}\n.coupon-list .confirm-popup .confirm-details .confirm-title h3[data-v-0fbf9bc2] {\n        margin-top: 0.93333rem;\n}\n.coupon-list .confirm-popup .confirm-details .confirm-content[data-v-0fbf9bc2] {\n      color: #7A7A7A;\n      font-size: 0.74667rem;\n}\n.coupon-list .confirm-popup .confirm-details .button-section[data-v-0fbf9bc2] {\n      margin-top: 2.13333rem;\n}\n.coupon-list .confirm-popup .confirm-details .button-section .van-button--warning[data-v-0fbf9bc2] {\n        background-color: #BA1C28;\n        border-color: #BA1C28;\n}\n",""])},av00:function(t,e,o){"use strict";var n=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"coupon-list"},[t.source.length?[t._l(t.source,function(e,n){return o("div",{key:n,staticClass:"box is-shadowless",class:[{selectable:t.canBeSelected},t.hasSelected(e)],on:{click:function(o){t.makeItSelected(e)}}},[o("div",{staticClass:"type"},[t._v(t._s(t._f("findCouponMapping")(e.couponType)))]),o("div",{staticClass:"coupon-wrap"},[o("div",{staticClass:"coupon-left"},[o("strong",[t._v(t._s("mine"===t.couponPage?e.couponName:"points"==t.type?e.earnInPoint:e.earnInPrice))]),o("p",[t._v(t._s(e.couponTag))])]),o("div",{staticClass:"coupon-right"},["mine"===t.couponPage?[o("p",{staticClass:"description"},[t._v(t._s(e.couponDescription))]),o("p",{staticClass:"eff-time"},[t._v(t._s(e.couponInstanceValidFrom)+" 到 "+t._s(e.couponInstanceValidTo))]),o("p",{staticClass:"time"},[t._v("获取时间: "+t._s(e.gainDate))])]:[o("p",{staticClass:"description"},[t._v(t._s(e.name))]),o("p",{staticClass:"eff-time"},[t._v(t._s(t._f("timeToDate")(e.couponValidFrom))+" 到 "+t._s(t._f("timeToDate")(e.couponValidTo)))]),o("p",{staticClass:"time"},[t._v("剩余: "+t._s(e.availableAmount))])]],2),t.canBeSelected?o("div",{staticClass:"checkbox"},[o("van-icon",{attrs:{name:"checked",color:t.hasSelected(e)?"#FF6E6E":"#FFFFFF"}})],1):t._e()]),t.buttons.status?o("div",{staticClass:"button-section"},[o("van-button",{attrs:{type:"danger",size:"normal",block:""},on:{click:function(o){t.useItNow(t.buttons.type,e)}}},[t._v(t._s("points"===t.buttons.type?"立即兑换":"立即购买"))])],1):t._e()])}),o("van-popup",{staticClass:"confirm-popup",attrs:{"close-on-click-overlay":!1},model:{value:t.getClaimSuccess.status,callback:function(e){t.$set(t.getClaimSuccess,"status",e)},expression:"getClaimSuccess.status"}},[o("div",{staticClass:"confirm-details"},[o("div",{staticClass:"confirm-title"},[o("van-icon",{attrs:{name:"checked",size:"6em",color:"#FF6E6E"}}),o("h3",[t._v("恭喜您，"+t._s(t.getClaimSuccess.words)+"成功")])],1),o("div",{staticClass:"button-section"},[o("van-button",{attrs:{block:"",type:"warning"},on:{click:t.makeConfirm}},[t._v("确定")])],1)])])]:o("p",{staticClass:"noresult"},[t._v("找不到优惠券信息")])],2)};n._withStripped=!0;var s={render:n,staticRenderFns:[]};e.a=s},dBdW:function(t,e,o){"use strict";var n=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{attrs:{id:"prospectus-layout"}},[o("van-cell-group",[o("van-cell",{staticClass:"mr is-highlighted",attrs:{title:t.title+"总价",value:t.form.amount}}),o("van-cell",{attrs:{title:t.title+"付款方式","is-link":"",value:t.paymentMedthodSelected||t.getDefaultSelectValue},on:{click:function(e){t.showPaymentMethod=!0}}}),o("van-cell",{attrs:{title:"还款方式","is-link":"",value:t.LoanMedthodSelected||t.getDefaultSelectValue},on:{click:function(e){t.showLoanMethod=!0}}}),o("van-cell",{staticClass:"mr",attrs:{title:"优惠折扣",value:t.form.discount}}),o("van-cell",{staticClass:"mr",attrs:{title:t.title+"成交总价",value:t.form.totalAmount}}),o("van-cell",{staticClass:"mr",attrs:{title:t.title+"定金",value:t.form.deposit}})],1),t.filterCouponList&&t.filterCouponList.length?o("Coupon",{attrs:{source:t.filterCouponList,buttons:{},couponPage:"mine",canBeSelected:!0},on:{receiveFromChild:t.receiveFromChild}}):t._e(),o("van-popup",{attrs:{position:"bottom"},model:{value:t.showPaymentMethod,callback:function(e){t.showPaymentMethod=e},expression:"showPaymentMethod"}},[o("van-picker",{attrs:{"show-toolbar":"",columns:t.getPaymentMethod},on:{confirm:t.paymentMethodPickerOnConfirm,cancel:function(e){t.showPaymentMethod=!1}}})],1),o("van-popup",{attrs:{position:"bottom"},model:{value:t.showLoanMethod,callback:function(e){t.showLoanMethod=e},expression:"showLoanMethod"}},[o("van-picker",{attrs:{"show-toolbar":"",columns:t.getLoanMethod},on:{confirm:t.loanMethodPickerOnConfirm,cancel:function(e){t.showLoanMethod=!1}}})],1),o("p",{staticClass:"description"}),o("div",{staticClass:"button-section"},[o("van-button",{attrs:{type:"danger",size:"normal",block:""},on:{click:t.goToNextStep}},[t._v("下一步")])],1)],1)};n._withStripped=!0;var s={render:n,staticRenderFns:[]};e.a=s},lTfN:function(t,e,o){var n=o("5LWu");"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);o("rjj0")("932ba9ea",n,!1,{sourceMap:!1})},omM4:function(t,e,o){"use strict";(function(t){var n=o("bOdI"),s=o.n(n),i=o("Dd8w"),a=o.n(i),r=o("5cTm"),c=o("NYxO");e.a={name:"timesshop-prospectuslayout",components:{Coupon:r.a},props:{title:{type:String,required:!0},type:{type:String,default:function(){return"subscribe"}}},data:function(){return{getDefaultSelectValue:"请选择",paymentMedthodSelected:null,LoanMedthodSelected:null,showPaymentMethod:!1,showLoanMethod:!1,coupons:[],initData:null,form:{amount:null,discount:null,totalAmount:null,deposit:null}}},computed:a()({},Object(c.mapGetters)({getHouseDetails:"house/getHouseDetails",getTempSubscribeRoomList:"tempSubscribe/getTempSubscribeRoomList",getMyCoupons:"coupons/getMyCoupons",getCalculateResp:"orders/getCalculateResp",getTempSales:"salesconsultant/getTempSales",getUserInfoResponse:"authorization/getUserInfoResponse",getTempSubscribeParkingList:"tempSubscribe/getTempSubscribeParkingList",getTempProposalId:"tempSubscribe/getTempProposalId",getTempRoomPayFormId:"tempSubscribe/getTempRoomPayFormId",getTempRoomCouponIds:"tempSubscribe/getTempRoomCouponIds"}),{getPaymentMethod:function(){var e=("车位"===this.title?t.head(this.getTempSubscribeParkingList):t.head(this.getTempSubscribeRoomList)).buildingId,o=t.head(t.filter(this.getHouseDetails.buildings,{bldId:e})).paymentMethod;return t.map(o,"payformName")},getLoanMethod:function(){return t.map([{code:"DENGEBENXI",name:"等额本息"},{code:"DENGEBENJIN",name:"等额本金"}],"name")},filterCouponList:function(){var t=this,e=this.getMyCoupons.data?this.getMyCoupons.data:[];return"车位"!==this.title?e.filter(function(t){return"GAINED"===t.couponStatus}):e.filter(function(t){return"GAINED"===t.couponStatus}).filter(function(e){return t.getTempRoomCouponIds.indexOf(e.timesCouponInstanceId)<0})}}),mounted:function(){var e=this;this.initData=function(){var o=e.getCalculateResp.data,n=o.total,s=o.roomTotal,i=o.feeList,a=o.payformName,r=o.discountRemark,c=o.loanType,u=t.head(t.filter(i,{itemName:"定金"})).amount;e.form.amount=n,e.form.totalAmount=s,e.form.deposit=u,e.form.discount=r,e.paymentMedthodSelected=a,e.LoanMedthodSelected=c},this.initData()},methods:s()({receiveFromChild:function(t){this.SalesConsultantId=t},paymentMethodPickerOnConfirm:function(t,e){this.showPaymentMethod=!this.showPaymentMethod,this.paymentMedthodSelected=t,this.LoanMedthodSelected=null,this.$options.methods.commonPaymentMedthod.bind(this)()},loanMethodPickerOnConfirm:function(t,e){this.showLoanMethod=!this.showLoanMethod,this.LoanMedthodSelected=t,this.$options.methods.commonPaymentMedthod.bind(this)()},goToNextStep:function(){var e=this,o=(t.head(this.getTempSubscribeRoomList)||{}).apartmentId,n=void 0===o?"":o,s="车位"===this.title?t.head(this.getTempSubscribeParkingList).apartmentId:"",i=this.getTempSubscribeRoomList&&this.getTempSubscribeRoomList.length>0?t.head(this.getTempSubscribeRoomList):t.head(this.getTempSubscribeParkingList),r=i.buildingId,c=void 0===r?"":r,u=i.originOrderId,d=void 0===u?"":u,l=(t.head(t.filter(this.getHouseDetails.buildings,{bldId:c}))||{}).paymentMethod,p=void 0===l?"":l,m=t.head(t.filter(p,{payformName:this.paymentMedthodSelected})),h=m.payFormID,f=m.payFormType,b=this.getTempSales.salesId,g=this.getUserInfoResponse.userId,v=!1;switch(f){case"2":case"4":case"5":case"6":v=!0;break;default:v=!1}if(v&&null===this.LoanMedthodSelected)return this.$toast("请选择还款方式");this.title;var y={projectId:this.$route.query.id,buildingId:c,apartmentId:n,carportsNumber:s,salesId:b,userId:g,originOrderId:d};if("车位"===this.title||!this.getTempSubscribeParkingList.length){var I=void 0;this.$options.methods.toastLoading.bind(this)("订单创建中");var S=this.getCalculateResp.data.roomPurchasePlanPk;return I="车位"!==this.title?{roomPayFormId:h,paymentPlanIdRoom:S,roomCouponIds:this.coupons.length?this.coupons:[]}:{carportPayFormId:h,roomPayFormId:this.getTempRoomPayFormId||"",paymentPlanIdRoom:this.getTempProposalId||"",paymentPlanIdCarports:S,roomCouponIds:this.getTempRoomCouponIds||[],carportCouponIds:this.coupons.length?this.coupons:""},"transfer"===this.type?this.$store.dispatch("orders/createTransferOrder",a()({},y,{paymentPlanIdRoom:"",paymentPlanIdCarports:""})).then(function(){e.$options.methods.toastLoading.bind(e)("订单创建成功"),e.$router.push({name:"payment-transferPayment"})}).catch(function(t){e.$toast(t)}):this.$store.dispatch("orders/createOrder",a()({},y,I)).then(function(){e.$options.methods.toastLoading.bind(e)("订单创建成功"),e.$router.push({name:"payment"})}).catch(function(t){e.$toast(t)})}var C=this.getCalculateResp.data.roomPurchasePlanPk;this.$store.commit("tempSubscribe/SET_TEMPPROPOSALID",C),this.$store.commit("tempSubscribe/SET_TEMPROOMPAYFORMID",h),this.$store.commit("tempSubscribe/SET_TEMPROOMCOUPONIDS",this.coupons);var P=this.$route.query,M="house-subscribe-parking-proposal";"transfer"===this.type&&(M="house-transfer-parking-proposal"),this.$router.push({name:M,query:P})},toastLoading:function(t){this.$toast.loading({mask:!1,duration:0,forbidClick:!0,message:t})},commonPaymentMedthod:function(){var e=this,o=(arguments.length>0&&void 0!==arguments[0]&&arguments[0],(t.head(this.getTempSubscribeRoomList)||{}).apartmentId),n=void 0===o?"":o,s="车位"===this.title?t.head(this.getTempSubscribeParkingList).apartmentId:"",i=this.getTempSubscribeRoomList&&this.getTempSubscribeRoomList.length>0?t.head(this.getTempSubscribeRoomList):t.head(this.getTempSubscribeParkingList),r=i.buildingId,c=void 0===r?"":r,u=(i.originOrderId,(t.head(t.filter(this.getHouseDetails.buildings,{bldId:c}))||{}).paymentMethod),d=void 0===u?"":u,l=t.head(t.filter(d,{payformName:this.paymentMedthodSelected})),p=l.payFormID,m=l.payFormType,h=this.getTempSales.salesId,f=(this.getUserInfoResponse.userId,!1);switch(m){case"2":case"4":case"5":case"6":f=!0;break;default:f=!1}if(f&&null===this.LoanMedthodSelected)return this.$toast("请选择还款方式");var b="车位"===this.title?s:n,g=(this.$route.query.id,{voucherId:this.coupons.length?this.coupons:"",paymentMethod:p,returnMethod:this.LoanMedthodSelected,projectId:this.$route.query.id,buildingId:c,apartmentId:b,salesId:h});this.$store.dispatch("orders/calculate",a()({},g)).then(function(t){e.initData()}).catch(function(t){e.$toast(t)})}},"receiveFromChild",function(e){this.coupons=t.map(e,"timesCouponInstanceId")})}}).call(e,o("M4fF"))},"zd+g":function(t,e,o){"use strict";(function(t){var n=o("Dd8w"),s=o.n(n),i=o("NYxO");e.a={name:"timesshop-coupon",computed:s()({},Object(i.mapGetters)({isAuthorized:"authorization/isAuthorized",getClaimSuccess:"coupons/getClaimSuccess"})),props:{source:{type:Array,required:!0},type:{type:String,default:function(){return"points"}},buttons:{type:Object,default:function(){return!1}},couponPage:{type:String,default:function(){return"coupons"}},canBeSelected:{type:Boolean,default:function(){return!1}}},data:function(){return{selected:[]}},methods:{makeConfirm:function(){this.$store.dispatch("coupons/setClaimSuccess",{})},useItNow:function(t,e){if(!this.isAuthorized)return this.$store.commit("authorization/SET_VISIT_PATH","/coupons?name=积分商城"),this.$router.push({name:"mine-account-sso",query:{login:"true",from:"/coupons?name=积分商城"}});this.$router.push({name:"coupons-id",params:{id:e.id},query:{type:t}})},makeItSelected:function(e){this.canBeSelected&&(t.find(this.selected,e)?this.selected.splice(t.findIndex(this.selected,e),1):this.selected.push(e),this.$emit("receiveFromChild",this.selected))},hasSelected:function(e){return t.find(this.selected,e)?"is-selected":""}}}}).call(e,o("M4fF"))}});