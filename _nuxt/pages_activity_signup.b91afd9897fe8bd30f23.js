webpackJsonp([41],{JbzN:function(t,i,n){"use strict";var e=new RegExp("(\\d{4})-(\\d{2})-(\\d{2})([T\\s](\\d{2}):(\\d{2}):(\\d{2})(\\.(\\d{3}))?)?.*"),a={formatDate:function(t,i){/(y+)/.test(i=i||"yyyy-MM-dd")&&(i=i.replace(RegExp.$1,(t.getFullYear()+"").substr(4-RegExp.$1.length)));var n={"M+":t.getMonth()+1,"d+":t.getDate(),"h+":t.getHours(),"m+":t.getMinutes(),"s+":t.getSeconds()};for(var e in n){var a=n[e]+"";new RegExp("("+e+")").test(i)&&(i=i.replace(RegExp.$1,1===RegExp.$1.length?a:o(a)))}return i},toDate:function(t){if(e.test(t)){var i=t.replace(e,function(t,i,n,e,a,o,r,s,c,d){return new Date(i,n-1,e,o||"00",r||"00",s||"00",d||"00").getTime()}),n=new Date;return n.setTime(i),n}return null},compareDate:function(t,i){return new Date(t.replace(/\\-/g,"\\/"))>new Date(i.replace(/\\-/g,"\\/"))},diffTime:function(t){var i=new Date;return this.toDate(t).getTime()-i.getTime()},formatDiffTime:function(t){var i=Math.abs(t),n=Math.floor(i/864e5),e=i%864e5,a=Math.floor(e/36e5),o=e%36e5,r=Math.floor(o/6e4),s=o%6e4,c=Math.round(s/1e3);return n>0?n+"天"+a+"时"+r+"分"+c+"秒":a>0?a+"时"+r+"分"+c+"秒":r>0?r+"分"+c+"秒":c+"秒"}};function o(t){return("00"+t).substr(t.length)}i.a=a},"Kg2+":function(t,i,n){"use strict";var e=n("62+5"),a=n("IdIt"),o=n("JbzN");i.a={layout:"notabbar",middleware:"authorizationRequired",head:function(){return{style:[{cssText:"html { background-color: #ffffff !important; }",type:"text/css"}]}},created:function(){this.$store.commit("share/SET_SHARETYPE","activity")},data:function(){return{showConfirmPopup:!1,form:{name:{value:"",message:null,isvaild:!0},phoneNumber:{value:"",message:null,isvaild:!0},numbers:{value:"",message:null,isvaild:!0}},getActiveDetail:"",imgPrefix:"",wishlisted:!1}},mounted:function(){var t=this,i=this,n=this.$route.query.id,o=this.$store.getters["authorization/getUserLoginResponse"].data.token,r=this,s=this.$store.state.share.shareType,c=this.$route.query.title;e.a.postRequest(a.a.share.getConfig,{appid:"wx8b729213fa67ac2f",url:window.location.href.split("#")[0]}).then(function(i){if("activity"==s)if(i&&"true"==i.success){wx.config({appId:"wx8b729213fa67ac2f",timestamp:i.timestamp,nonceStr:"wm3WZYTPz0wzccnw",signature:i.signature,jsApiList:["onMenuShareAppMessage"]});var o=t.imgPrefix;wx.ready(function(){e.a.getRequest(a.a.share.getShareContent(s,n)).then(function(t){"true"===t.success&&wx.onMenuShareAppMessage({title:c,desc:t.desc,link:window.location.href,imgUrl:o+t.imgUrl,success:function(){}})})})}else r.$toast(i.exception||"获取sdk校验参数失败")}),e.a.getRequest(a.a.activesignup.getActiveDetail(n,"Mobile"),{},o).then(function(t){i.getActiveDetail=t.data,"1"===i.getActiveDetail.isFavorite?i.wishlisted=!0:i.wishlisted=!1})},methods:{isActivityActive:function(t){var i=o.a.toDate(t+":00");return(new Date).getTime()<i.getTime()},onChange:function(t){this.onChangeValidator(t)},activityForm:function(){var t=this;this.handleFormSubmit(this.$refs.activityForm,this.form)&&this.$store.dispatch("events/enrollment",{phone:this.form.phoneNumber.value,name:this.form.name.value,numbers:this.form.numbers.value,eventId:this.$route.query.id}).then(function(){t.showConfirmPopup=!t.showConfirmPopup}).catch(function(i){t.$toast(i)})},makeConfirm:function(){this.showConfirmPopup=!this.showConfirmPopup,this.$router.back()},iwantsignup:function(){this.getActiveDetail.maxNumber;var t=this.getActiveDetail.quotaLeft;parseInt(t)>0?this.$router.push({name:"activity-signupProject",query:{title:this.getActiveDetail.belongProject,startTime:this.getActiveDetail.eventStartTime,endTime:this.getActiveDetail.eventEndTime,id:this.getActiveDetail.eventId}}):this.$toast("活动名额已满，感谢参与。")},wishlist:function(){var t=this;this.$store.dispatch("wishlist/multiWishlist",{typeId:"EVENT",iteamId:this.getActiveDetail.eventId}).then(function(){t.$toast("活动收藏成功。"),t.wishlisted=!t.wishlisted}).catch(function(i){t.$toast(i)})},unwishlist:function(){var t=this;this.$store.dispatch("wishlist/wishlist",{method:"delete",typeId:"EVENT",iteamId:this.getActiveDetail.eventId}).then(function(){t.wishlisted=!t.wishlisted,t.$toast({duration:500,forbidClick:!0,message:"取消收藏成功"})}).catch(function(i){t.$toast(i)})}}}},Nsfh:function(t,i,n){t.exports=n.p+"img/below_ic_mine.ba5901e.png"},QTCO:function(t,i,n){(t.exports=n("FZ+f")(!1)).push([t.i,"\n.button-section {\n  display: -webkit-box;\n  display: -webkit-flex;\n  display: flex;\n  /*margin-left: -20PX;*/\n  /*margin-right: -20PX;*/\n  position: fixed;\n  bottom: 0;\n  left: 0;\n  right: 0;\n  width: 100%;\n}\n.button-section .van-button--warning {\n    background-color: #BA1C28;\n    border-color: #BA1C28;\n}\n.button-section .van-button--warning:nth-child(1) {\n    background-color: #FF8F00;\n    border-color: #FF8F00;\n}\n",""])},eE5C:function(t,i,n){(t.exports=n("FZ+f")(!1)).push([t.i,"\n#activity-signup .card[data-v-b773d162] {\n  margin-bottom: 0.93333rem;\n}\n#activity-signup .card .card-content[data-v-b773d162] {\n    padding: 0.93333rem;\n    overflow: auto;\n}\n#activity-signup .card .card-content .media[data-v-b773d162] {\n      -webkit-box-align: center !important;\n      -webkit-align-items: center !important;\n              align-items: center !important;\n}\n#activity-signup .card .card-content .media .media-content[data-v-b773d162] {\n        margin-bottom: 20PX;\n}\n#activity-signup .card .card-content .media .media-content p[data-v-b773d162] {\n          margin: 0 0 0.4rem;\n}\n#activity-signup .card .card-content .media .media-content p.title[data-v-b773d162] {\n            color: #252525;\n            font-size: 16PX;\n}\n#activity-signup .card .card-content .media .media-content p.mainPlay[data-v-b773d162] {\n            font-size: 13PX;\n}\n#activity-signup .card .card-content .media .media-content p.mainPlay img[data-v-b773d162] {\n              width: 20PX;\n              margin-right: 5PX;\n              position: relative;\n              top: 3PX;\n}\n#activity-signup .card .card-content .media .media-content time[data-v-b773d162] {\n          color: #525252;\n          font-size: 0.74667rem;\n}\n#activity-signup .card .card-content .media .activeinfo .info[data-v-b773d162] {\n        display: -webkit-box;\n        display: -webkit-flex;\n        display: flex;\n        font-size: 13PX;\n        line-height: 20PX;\n}\n#activity-signup .card .card-content .media .activeinfo .info label[data-v-b773d162] {\n          width: 85PX;\n          margin-top: 5PX;\n}\n#activity-signup .card .card-content .media .activeinfo .info span[data-v-b773d162] {\n          width: 100%;\n          margin-top: 5PX;\n}\n#activity-signup .card .card-content .media .activeinfo .info:nth-child(1) label[data-v-b773d162] {\n          margin-top: 0;\n}\n#activity-signup .card .card-content .media .activeinfo .info:nth-child(1) span[data-v-b773d162] {\n          margin-top: 0;\n}\n#activity-signup .card .card-content form[data-v-b773d162] {\n      margin-top: 0.93333rem;\n}\n#activity-signup .card .card-content form .title[data-v-b773d162] {\n        color: #7A7A7A;\n        font-size: 0.74667rem;\n}\n#activity-signup .card .card-content form .field[data-v-b773d162] {\n        margin-top: 0.93333rem;\n        margin-bottom: 0;\n}\n#activity-signup .card .card-content form .field input[data-v-b773d162] {\n          height: 2.4rem;\n          background: #f4f4f4;\n          font-size: 0.74667rem;\n          color: #7a7a7a;\n          border: none;\n}\n#activity-signup .card .card-content .button-section[data-v-b773d162] {\n      display: -webkit-box;\n      display: -webkit-flex;\n      display: flex;\n      position: fixed;\n      bottom: 0;\n      right: 0;\n      left: 0px;\n      width: 100%;\n}\n#activity-signup .card .card-content .button-section .van-button--warning[data-v-b773d162] {\n        background-color: #BA1C28;\n        border-color: #BA1C28;\n}\n#activity-signup .card .card-content .button-section .van-button--warning[data-v-b773d162]:nth-child(1) {\n        background-color: #FF8F00;\n        border-color: #FF8F00;\n}\n#activity-signup .card .card-content .confirm-popup[data-v-b773d162] {\n      width: 80%;\n}\n#activity-signup .card .card-content .confirm-popup .confirm-details[data-v-b773d162] {\n        padding: 15PX;\n}\n#activity-signup .card .card-content .confirm-popup .confirm-details .confirm-title[data-v-b773d162] {\n          font-size: 0.85333rem;\n          font-weight: bold;\n          color: #C40224;\n          padding: 15PX 0;\n          text-align: center;\n}\n#activity-signup .card .card-content .confirm-popup .confirm-details .confirm-title h3[data-v-b773d162] {\n            margin-top: 0.93333rem;\n}\n#activity-signup .card .card-content .confirm-popup .confirm-details .confirm-content[data-v-b773d162] {\n          color: #7A7A7A;\n          font-size: 0.74667rem;\n}\n#activity-signup .card .card-content .confirm-popup .confirm-details .button-section[data-v-b773d162] {\n          margin-top: 2.13333rem;\n}\n",""])},h5rG:function(t,i,n){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var e=n("Kg2+"),a=n("ouWY"),o=!1;var r=function(t){o||(n("iCXF"),n("wif1"))},s=n("VU/8")(e.a,a.a,!1,r,"data-v-b773d162",null);s.options.__file="pages\\activity\\signup.vue",i.default=s.exports},iCXF:function(t,i,n){var e=n("eE5C");"string"==typeof e&&(e=[[t.i,e,""]]),e.locals&&(t.exports=e.locals);n("rjj0")("73ef3db7",e,!1,{sourceMap:!1})},ouWY:function(t,i,n){"use strict";var e=function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("div",{attrs:{id:"activity-signup"}},[e("van-nav-bar",{attrs:{"left-arrow":"",title:"活动详情",id:"navbar"},on:{"click-left":function(i){t.$router.back()}}}),e("div",{staticClass:"card is-paddingless is-shadowless"},[e("div",{staticClass:"card-image"},[e("figure",{staticClass:"image is-2by1"},[e("img",{attrs:{src:t.imgPrefix+t.getActiveDetail.imageUrl,alt:"Placeholder image"}})])]),e("div",{staticClass:"card-content"},[e("div",{staticClass:"media"},[e("div",{staticClass:"media-content"},[e("p",{staticClass:"title"},[t._v(t._s(t.$route.query.title))]),e("p",{staticClass:"mainPlay"},[e("img",{attrs:{src:n("Nsfh"),alt:""}}),t._v("主办方："+t._s(t.getActiveDetail.belongProject))])])]),e("div",{staticClass:"media"},[e("div",{staticClass:"activeinfo"},[e("div",{staticClass:"info"},[e("label",[t._v("活动时间：")]),e("span",[t._v("\n                                "+t._s(t._f("formatDateAndMini")(t.getActiveDetail.eventStartTime))+"   -  \n                                "+t._s(t._f("formatDateAndMini")(t.getActiveDetail.eventEndTime))+"\n                            ")])]),e("div",{staticClass:"info"},[e("label",[t._v("活动地址：")]),e("span",[t._v(t._s(t.getActiveDetail.eventAddress))])]),t.getActiveDetail.maxNumber>0?e("div",{staticClass:"info"},[e("label",[t._v("活动名额：")]),e("span",[t._v(t._s(t.getActiveDetail.maxNumber))])]):t._e()])]),e("div",{staticClass:"media"},[e("div",{staticClass:"media-content"},[e("p",{staticClass:"title"},[t._v("活动描述：")]),e("p",{domProps:{innerHTML:t._s(t.getActiveDetail.activityDescMob)}})])]),e("div",{staticClass:"button-section"},[t.wishlisted?e("van-button",{staticStyle:{"background-color":"#FF8F00","border-color":"#FF8F00",color:"#ffffff",height:"50PX"},attrs:{size:"normal",block:""},on:{click:t.unwishlist}},[t._v("取消收藏")]):e("van-button",{staticStyle:{"background-color":"#FF8F00","border-color":"#FF8F00",color:"#ffffff",height:"50PX"},attrs:{size:"normal",block:""},on:{click:t.wishlist}},[t._v("我要收藏")]),t.getActiveDetail.maxNumber>0&&t.getActiveDetail.quotaLeft>0&&t.isActivityActive(t.getActiveDetail.eventEndTime)?e("van-button",{staticStyle:{height:"50PX"},attrs:{type:"danger",size:"normal",block:""},on:{click:[function(t){},t.iwantsignup]}},[t._v("我要报名")]):t._e()],1)])])],1)};e._withStripped=!0;var a={render:e,staticRenderFns:[]};i.a=a},wif1:function(t,i,n){var e=n("QTCO");"string"==typeof e&&(e=[[t.i,e,""]]),e.locals&&(t.exports=e.locals);n("rjj0")("3d9de46b",e,!1,{sourceMap:!1})}});