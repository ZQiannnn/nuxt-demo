webpackJsonp([84],{"3fIj":function(e,t,r){"use strict";var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{attrs:{id:"mine-order-plege-upgrade"}},[r("van-nav-bar",{attrs:{"left-arrow":"",title:"我的认筹信息",id:"navbar"},on:{"click-left":function(t){e.$router.back()}}}),r("van-cell-group",[r("van-cell",{attrs:{title:"意向楼盘",value:e.orderInfo.projectName}}),r("van-collapse",{model:{value:e.activeHouses,callback:function(t){e.activeHouses=t},expression:"activeHouses"}},e._l(e.orderInfo.roomList,function(t,a){return r("van-collapse-item",{key:a,attrs:{title:"意向房间"+(a+1),name:a+""}},[r("p",[e._v("位置："+e._s(t.building)+e._s(t.floor))]),r("p",[e._v("建筑面积："+e._s(t.bldArea)+"㎡")]),r("p",[e._v("户型："+e._s(t.huxing))])])})),r("div",{staticClass:"spliter"}),r("van-collapse",{model:{value:e.activeCarports,callback:function(t){e.activeCarports=t},expression:"activeCarports"}},e._l(e.orderInfo.carportList,function(t,a){return r("van-collapse-item",{key:a,attrs:{title:"意向车位"+(a+1),name:a+""}},[r("p",[e._v(" 位置："+e._s(t.building)+e._s(t.floor))]),r("p",[e._v("名字："+e._s(t.name))])])})),r("div",{staticClass:"spliter"}),r("van-cell",{attrs:{title:"已缴纳筹金",value:e.paidAmount+"元"}}),r("van-cell",{attrs:{title:"应补缴纳诚意金",value:e.unPaidAmount+"元"}})],1),r("div",{staticClass:"button-section"},[r("van-button",{attrs:{type:"danger",size:"normal",block:""},on:{click:e.upgrade}},[e._v("我要升筹")])],1),e.htmlPayForm?r("div",{domProps:{innerHTML:e._s(e.htmlPayForm)}}):e._e(),e.htmlPayForm?r("script",{attrs:{type:"text/javascript"}},[e._v("document.all.pay_form.submit();")]):e._e()],1)};a._withStripped=!0;var n={render:a,staticRenderFns:[]};t.a=n},Fncu:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=r("VvCt"),n=r("3fIj"),o=!1;var i=function(e){o||r("yKO2")},s=r("VU/8")(a.a,n.a,!1,i,"data-v-291c92de",null);s.options.__file="pages\\house\\pledge\\upgrade\\index.vue",t.default=s.exports},UqoM:function(e,t,r){(e.exports=r("FZ+f")(!1)).push([e.i,"\n#mine-order-plege-upgrade .button-section[data-v-291c92de] {\n  margin: 35PX 15PX 0;\n}\n",""])},VvCt:function(e,t,r){"use strict";var a=r("Dd8w"),n=r.n(a),o=r("Xxa5"),i=r.n(o),s=r("//Fk"),u=r.n(s),c=r("d7EF"),l=r.n(c),d=r("exGp"),p=r.n(d),v=r("NYxO"),m=r("62+5"),f=r("IdIt");t.a={middleware:"authorizationRequired",layout:"notabbar",asyncData:function(){var e=p()(i.a.mark(function e(t){var r,a,n,o,s,c,d,p,v,g,h,y,b;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this,t.route.query.orderId){e.next=3;break}return e.abrupt("return",{});case 3:return t.route.query.orderId,r=t.store.getters["authorization/getUserLoginResponse"].data.token,a=t.store.getters["authorization/getUserLoginResponse"].data.userId,e.next=8,u.a.all([m.a.getRequest(f.a.order.getOrderInfo(a,t.route.query.orderId),{},r)]);case 8:for(n=e.sent,o=l()(n,1),s=o[0],c=(void 0===s?{}:s).data||{},d=c.recEntryList||[],p=0,v=0,g=0,h=null,y=null,b=0;b<d.length;b++)h=d[b],g+=Number(h.roomPrice),g+=Number(h.carportPrice),"PAID"==h.payStatus?(p+=Number(h.roomPrice),p+=Number(h.carportPrice)):"UNPAID"==h.payStatus&&(y=h.orderID,v+=Number(h.roomPrice),v+=Number(h.carportPrice));return e.abrupt("return",{orderInfo:c,recEntryList:d,paidAmount:p,unPaidAmount:v,totalAmount:g,pendingPaidOrderId:y,token:r});case 21:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),computed:n()({},Object(v.mapState)({isAuth:"authorization/isAuthorized",user:"authorization/getUserLoginResponse"})),data:function(){return{fullscreenLoading:!1,htmlPayForm:null,pendingPaidOrderId:null,orderInfo:{},activeHouses:["0"],activeCarports:["0"]}},methods:{needPadding:function(e,t){return e.length>t&&t>0},upgrade:function(){var e=this,t=this.pendingPaidOrderId,r=this.$route.query.orderId,a="http://"+location.host+"/house/pledge/upgrade/success?"+t+"&orginalId="+r;m.a.postRequest(f.a.pay.pay(t),{orderId:t,orderyType:"SC_ORDER",device:"Mobile",paymentMethod:"UNIONPAY",returnUrl:a},this.token).then(function(t){t&&"true"===t.success?e.htmlPayForm=t.data.htmlPayForm:e.$toast("升筹失败")}).catch(function(t){e.$toast(t.exception||"升筹失败")})}}}},yKO2:function(e,t,r){var a=r("UqoM");"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);r("rjj0")("5a39cc74",a,!1,{sourceMap:!1})}});