webpackJsonp([85],{"2nLc":function(e,t,o){var a=o("eKj4");"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);o("rjj0")("13daf7b2",a,!1,{sourceMap:!1})},Fp2e:function(e,t,o){"use strict";var a=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{attrs:{id:"house-pledge-information-confirm"}},[o("van-nav-bar",{attrs:{"left-arrow":"",title:"确认认筹信息",id:"navbar"},on:{"click-left":function(t){e.$router.back()}}}),o("van-cell-group",[o("van-cell",{attrs:{title:"认筹单元",value:e.item.projectName}}),e.getTempPledgeRoomList&&e.getTempPledgeRoomList.length?o("van-cell",{attrs:{title:"房间筹金",value:e.item.roomPrice}}):e._e(),e.getTempPledgeParkingList&&e.getTempPledgeParkingList.length?o("van-cell",{attrs:{title:"车位筹金",value:e.item.carportPrice}}):e._e(),o("van-cell",{attrs:{title:"销售顾问",value:e.item.sales?e.item.sales.salesName:""}}),o("van-cell",{attrs:{title:"支付方式","is-link":"",value:e.paymentMedthodSelected||e.getDefaultSelectValue},on:{click:function(t){e.showPaymentMethod=!0}}}),o("van-popup",{attrs:{position:"bottom"},model:{value:e.showPaymentMethod,callback:function(t){e.showPaymentMethod=t},expression:"showPaymentMethod"}},[o("van-picker",{attrs:{"show-toolbar":"",columns:e.getPaymentMethod},on:{confirm:e.paymentMethodPickerOnConfirm,cancel:function(t){e.showPaymentMethod=!1}}})],1)],1),o("div",{staticClass:"button-section"},[o("van-button",{attrs:{type:"danger",size:"normal",block:""},on:{click:e.pay}},[e._v("支付")])],1),o("div",{domProps:{innerHTML:e._s(e.htmlPayForm)}}),e.htmlPayForm?o("script",{attrs:{type:"text/javascript"}},[e._v("document.all.pay_form.submit();")]):e._e()],1)};a._withStripped=!0;var n={render:a,staticRenderFns:[]};t.a=n},NYTN:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=o("arCI"),n=o("Fp2e"),i=!1;var r=function(e){i||o("2nLc")},s=o("VU/8")(a.a,n.a,!1,r,"data-v-4255b74f",null);s.options.__file="pages\\house\\pledge\\information\\confirm.vue",t.default=s.exports},arCI:function(e,t,o){"use strict";(function(e){var a=o("Dd8w"),n=o.n(a),i=o("NYxO"),r=o("62+5"),s=o("IdIt"),l=o("NFYZ");t.a={layout:"notabbar",middleware:["authorizationRequired"],data:function(){return{item:JSON.parse(this.$route.query.item),htmlPayForm:null,getDefaultSelectValue:"银联支付",paymentMedthodSelected:"银联支付",showPaymentMethod:!1}},computed:n()({},Object(i.mapGetters)({getTempPledgeRoomList:"tempPledge/getTempPledgeRoomList",getTempPledgeParkingList:"tempPledge/getTempPledgeParkingList",getPledgeOrderDetails:"orders/getPledgeOrderDetails",getOrderResponse:"orders/getOrderResponse",getHouseDetails:"house/getHouseDetails",isAuthentication:"authorization/isAuthentication",getUserInfoResponse:"authorization/getUserInfoResponse"}),{getPaymentMethod:function(){return e.map([{code:"UNIONPAY",name:"银联支付"},{code:"wxPay",name:"微信支付"},{code:"offline",name:"线下支付"}],"name")}}),methods:{pay:function(){var t,o=this;if("wxPay"!=(t=e.head([{code:"UNIONPAY",name:"银联支付"},{code:"wxPay",name:"微信支付"},{code:"offline",name:"线下支付"}].filter(function(e){return e.name==o.paymentMedthodSelected})).code)||l.a.isWeixin()){var a=this.$store.getters["authorization/getUserLoginResponse"].data.token;if("offline"==t){var n=this.item.roomPrice||0;this.getTempPledgeParkingList&&this.getTempPledgeParkingList.length&&(n+=parseFloat(this.item.carportPrice));var i=this.getUserInfoResponse.userId;r.a.getRequest(s.a.pay.changePayType(i,this.item.orderId,t),{},a).then(function(e){if(!e||"true"!==e.success)return"SYS_ERR_000"==e.errorCode?void 0:void o.$toast(e&&e.exception||"支付出错");o.$router.push({path:"/payment/pledgeSuccess",query:{orderId:o.item.orderId,orderSum:n}})})}else r.a.postRequest(s.a.pay.pay(this.item.orderId),{orderId:this.item.orderId,orderType:"RC_ORDER",device:"Mobile",paymentMethod:t,returnUrl:"http://"+location.host+"/payment/pledgeSuccess?orderId="+this.item.orderId},this.token).then(function(e){e&&"true"===e.success?o.htmlPayForm=e.data.htmlPayForm:o.$toast(e.exception||"支付失败")}).catch(function(e){}).finally(function(){setTimeout(function(){return o.$toast.clear()},1e3)})}else this.$toast("请在微信环境中支付")},paymentMethodPickerOnConfirm:function(e,t){this.showPaymentMethod=!this.showPaymentMethod,this.paymentMedthodSelected=e}}}}).call(t,o("M4fF"))},eKj4:function(e,t,o){(e.exports=o("FZ+f")(!1)).push([e.i,"\n#house-pledge-information-confirm .button-section[data-v-4255b74f] {\n  margin: 50PX 35PX 0;\n}\n",""])}});