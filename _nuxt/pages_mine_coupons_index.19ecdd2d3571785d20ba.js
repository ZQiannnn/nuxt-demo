webpackJsonp([50],{A1jr:function(t,n,e){(t.exports=e("FZ+f")(!1)).push([t.i,"\n#mine-conpons .box[data-v-2bdd2920] {\n  margin: 0 15PX 15PX;\n  border: 1PX solid #EDEDED;\n  padding: 0.4rem 0.66667rem;\n}\n#mine-conpons .box .type[data-v-2bdd2920] {\n    color: #FF6E6E;\n    font-size: 0.58667rem;\n    text-align: right;\n}\n#mine-conpons .box .coupon-wrap[data-v-2bdd2920] {\n    display: -webkit-box !important;\n    display: -webkit-flex !important;\n    display: flex !important;\n    -webkit-box-align: center !important;\n    -webkit-align-items: center !important;\n            align-items: center !important;\n    margin-bottom: 0.93333rem;\n    text-align: center;\n}\n#mine-conpons .box .coupon-wrap .coupon-left[data-v-2bdd2920] {\n      margin-right: 0.93333rem;\n      padding-right: 0.93333rem;\n      border-right: 1PX solid #DADADA;\n}\n#mine-conpons .box .coupon-wrap .coupon-left strong[data-v-2bdd2920] {\n        color: #252525;\n        font-size: 1.06667rem;\n}\n#mine-conpons .box .coupon-wrap .coupon-left p[data-v-2bdd2920] {\n        color: #B2B2B2;\n        font-size: 0.74667rem;\n}\n#mine-conpons .box .coupon-wrap .coupon-right .description[data-v-2bdd2920] {\n      color: #252525;\n      font-size: 0.74667rem;\n}\n#mine-conpons .box .coupon-wrap .coupon-right .eff-time[data-v-2bdd2920] {\n      color: #7A7A7A;\n      font-size: 0.69333rem;\n}\n#mine-conpons .box .coupon-wrap .coupon-right .time[data-v-2bdd2920] {\n      margin-top: 0.4rem;\n      color: #C40224;\n      font-size: 0.58667rem;\n}\n",""])},Bsr5:function(t,n,e){var o=e("A1jr");"string"==typeof o&&(o=[[t.i,o,""]]),o.locals&&(t.exports=o.locals);e("rjj0")("6327ba31",o,!1,{sourceMap:!1})},D1MP:function(t,n,e){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o=e("vuf9"),a=e("ticK"),i=!1;var r=function(t){i||e("Bsr5")},s=e("VU/8")(o.a,a.a,!1,r,"data-v-2bdd2920",null);s.options.__file="pages\\mine\\coupons\\index.vue",n.default=s.exports},JbzN:function(t,n,e){"use strict";var o=new RegExp("(\\d{4})-(\\d{2})-(\\d{2})([T\\s](\\d{2}):(\\d{2}):(\\d{2})(\\.(\\d{3}))?)?.*"),a={formatDate:function(t,n){/(y+)/.test(n=n||"yyyy-MM-dd")&&(n=n.replace(RegExp.$1,(t.getFullYear()+"").substr(4-RegExp.$1.length)));var e={"M+":t.getMonth()+1,"d+":t.getDate(),"h+":t.getHours(),"m+":t.getMinutes(),"s+":t.getSeconds()};for(var o in e){var a=e[o]+"";new RegExp("("+o+")").test(n)&&(n=n.replace(RegExp.$1,1===RegExp.$1.length?a:i(a)))}return n},toDate:function(t){if(o.test(t)){var n=t.replace(o,function(t,n,e,o,a,i,r,s,c,u){return new Date(n,e-1,o,i||"00",r||"00",s||"00",u||"00").getTime()}),e=new Date;return e.setTime(n),e}return null},compareDate:function(t,n){return new Date(t.replace(/\\-/g,"\\/"))>new Date(n.replace(/\\-/g,"\\/"))},diffTime:function(t){var n=new Date;return this.toDate(t).getTime()-n.getTime()},formatDiffTime:function(t){var n=Math.abs(t),e=Math.floor(n/864e5),o=n%864e5,a=Math.floor(o/36e5),i=o%36e5,r=Math.floor(i/6e4),s=i%6e4,c=Math.round(s/1e3);return e>0?e+"天"+a+"时"+r+"分"+c+"秒":a>0?a+"时"+r+"分"+c+"秒":r>0?r+"分"+c+"秒":c+"秒"}};function i(t){return("00"+t).substr(t.length)}n.a=a},ticK:function(t,n,e){"use strict";var o=function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",{attrs:{id:"mine-conpons"}},[e("van-nav-bar",{attrs:{"left-arrow":"",title:t.$route.query.name||"未知标题",id:"navbar"},on:{"click-left":function(n){t.$router.back()}}}),e("van-tabs",{attrs:{sticky:""},model:{value:t.active,callback:function(n){t.active=n},expression:"active"}},t._l(t.tabList,function(n,o,a){return e("van-tab",{key:o,attrs:{title:n.title}},[n.data.length?t._l(n.data,function(o,a){return e("div",{key:a,staticClass:"box is-shadowless"},[e("div",{staticClass:"type"},[t._v(t._s(t._f("formatType")(o.couponType)))]),e("div",{staticClass:"coupon-wrap",on:{click:function(n){t.gotoDetail(o)}}},[e("div",{staticClass:"coupon-left"},[e("strong",[t._v(t._s(o.couponName))]),e("p",[t._v(t._s(o.couponTag))])]),e("div",{staticClass:"coupon-right"},[e("p",{staticClass:"description"},[t._v(t._s(o.couponDescription))]),e("p",{staticClass:"eff-time"},[t._v(t._s(t._f("formatTime")(o.couponInstanceValidFrom))+"-"+t._s(t._f("formatTime")(o.couponInstanceValidTo)))]),e("p",{staticClass:"time"},[t._v("获取时间: "+t._s(t._f("formatTime")(o.gainDate)))])])]),"未使用"===n.title&&"TYPE_OF_GOODS"===o.couponType?e("div",{staticClass:"button-section"},[e("van-button",{attrs:{type:"danger",size:"normal",block:""},on:{click:function(n){t.use(o.timesCouponInstanceId)}}},[t._v("立即使用")])],1):t._e()])}):e("p",{staticClass:"noresult"},[t._v("没找到"+t._s(n.title)+"的优惠券")])],2)}))],1)};o._withStripped=!0;var a={render:o,staticRenderFns:[]};n.a=a},vuf9:function(t,n,e){"use strict";(function(t){var o=e("Dd8w"),a=e.n(o),i=e("//Fk"),r=e.n(i),s=e("NYxO");e("JbzN");n.a={layout:"notabbar",middleware:"authorizationRequired",fetch:function(t){var n=t.store;return r.a.all([n.dispatch("coupons/myCoupon")])},data:function(){return{active:0,tabList:{pending:{title:"未使用",data:[]},used:{title:"已使用",data:[]},expired:{title:"已失效",data:[]}},sourceOrderList:[]}},computed:a()({},Object(s.mapGetters)({getMyCoupons:"coupons/getMyCoupons"})),filters:{formatType:function(t){return t?"TYPE_OF_DISCOUNT"===t?"方案折扣":"TYPE_OF_FEES"===t?"物业管理":"TYPE_OF_GOODS"===t?"实物优惠":void 0:""}},mounted:function(){this.sourceOrderList=this.getMyCoupons.data,this.tabList.used.data=t.filter(this.sourceOrderList,{couponStatus:"REDEEMED"}),this.tabList.pending.data=t.filter(this.sourceOrderList,{couponStatus:"GAINED"}),this.tabList.expired.data=t.filter(this.sourceOrderList,{couponStatus:"EXPIRED"})},methods:{use:function(t){this.$router.push({name:"mine-coupons-useCoupon",query:{id:t}})},gotoDetail:function(t){this.$router.push({name:"coupons-id",params:{id:t.timesCouponId},query:{type:"MONEY"==t.earnType?"cash":"points",fromMine:"y"}})}}}}).call(n,e("M4fF"))}});