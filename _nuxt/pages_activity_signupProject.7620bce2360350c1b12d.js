webpackJsonp([45],{CJh8:function(t,e,a){(t.exports=a("FZ+f")(!1)).push([t.i,"\n.signupProject[data-v-7bc2a07a] {\n  min-width: 100%;\n  height: 100%;\n  position: absolute;\n  top: 0;\n  background: #fff;\n}\n.signupProject .defaultInfo[data-v-7bc2a07a] {\n    padding: 10PX 15PX;\n    border-bottom: 15PX solid #f4f4f4;\n}\n.signupProject .defaultInfo .name[data-v-7bc2a07a] {\n      font-size: 15PX;\n      color: #C40224;\n      font-weight: bold;\n      line-height: 30PX;\n}\n.signupProject .defaultInfo .startTime[data-v-7bc2a07a], .signupProject .defaultInfo .endTime[data-v-7bc2a07a] {\n      color: #525252;\n      line-height: 20PX;\n      font-size: 12PX;\n}\n.signupProject .activityForm[data-v-7bc2a07a] {\n    padding: 10PX 15PX;\n}\n.signupProject .activityForm .title[data-v-7bc2a07a] {\n      font-size: 14PX;\n      margin-top: 5PX;\n      margin-bottom: 15PX;\n      color: #7A7A7A;\n}\n.signupProject .activityForm input[data-v-7bc2a07a] {\n      height: 45PX;\n      background: #f4f4f4;\n      border: 0;\n}\n.signupProject .activityForm .van-cell[data-v-7bc2a07a] {\n      padding: 0;\n}\n.signupProject .activityForm .van-cell .van-field__body[data-v-7bc2a07a] {\n        width: 100%;\n        background: #f4f4f4;\n        padding: 8px 9px;\n}\n.signupProject .activityForm .van-field[data-v-7bc2a07a] {\n      background: #C40224;\n}\n.signupProject .activityForm .van-field input[data-v-7bc2a07a] {\n        background: red;\n}\n.signupProject .button-section[data-v-7bc2a07a] {\n    width: 80%;\n    margin: 0 auto;\n    margin-top: 10PX;\n    position: static;\n    margin-bottom: 60PX;\n}\n.signupProject .confirm-popup[data-v-7bc2a07a] {\n    width: 80%;\n    z-index: 9999;\n}\n.signupProject .confirm-popup .confirm-details[data-v-7bc2a07a] {\n      padding: 15PX;\n}\n.signupProject .confirm-popup .confirm-details .confirm-title[data-v-7bc2a07a] {\n        font-size: 0.85333rem;\n        font-weight: bold;\n        color: #C40224;\n        padding: 15PX 0;\n        text-align: center;\n}\n.signupProject .confirm-popup .confirm-details .confirm-title h3[data-v-7bc2a07a] {\n          margin-top: 0.93333rem;\n}\n.signupProject .confirm-popup .confirm-details .confirm-content[data-v-7bc2a07a] {\n        color: #7A7A7A;\n        font-size: 0.74667rem;\n}\n.signupProject .confirm-popup .confirm-details .button-section[data-v-7bc2a07a] {\n        margin-top: 2.13333rem;\n}\n",""])},GglB:function(t,e,a){var n=a("CJh8");"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);a("rjj0")("bf779724",n,!1,{sourceMap:!1})},HdIc:function(t,e,a){"use strict";(function(t){var n=a("62+5"),i=a("IdIt");e.a={layout:"notabbar",middleware:"authorizationRequired",name:"",data:function(){return{showConfirmPopup:!1,showDatePopup:!1,form:{name:{value:"",message:null,isvaild:!0},phoneNumber:{value:"",message:null,isvaild:!0},numbers:{value:"",message:null,isvaild:!0},date:{value:"",message:null,isvaild:!0},smsCode:{value:"",message:null,isvaild:!0}},currentDate:new Date,minDate:new Date,maxDate:new Date(this.$route.query.endTime.substring(0,10)),clickDisabled:!1,smsButtonText:"获取验证码",wait:60,eventId:this.$route.query.id}},created:function(){Date.parse(this.currentDate)<Date.parse(this.$route.query.startTime)?(this.currentDate=new Date(this.$route.query.startTime),this.minDate=new Date(this.$route.query.startTime)):(this.currentDate=new Date,this.minDate=new Date)},methods:{onChange:function(t){this.onChangeValidator(t)},getValues:function(t){if(this.showDatePopup=!this.showDatePopup,!this.form.date.value){var e=new Date;this.form.date.value=e.getFullYear()+"-"+(e.getMonth()+1)+"-"+e.getDate()}},changeDate:function(){this.showDatePopup=!this.showDatePopup},change:function(t,e){var a=t.getValues();this.form.date.value=a[0]+"-"+a[1]+"-"+a[2]},closeDataPopup:function(){this.showDatePopup=!this.showDatePopup},sendSMSCode:function(){var e=this;this.clickDisabled||this.signleValidator(this.$refs.activityForm,t.omit(this.form,["name","numbers","date","smsCode"]))&&this.$store.dispatch("sms/sendSMSCode",{mobile:this.form.phoneNumber.value,type:"appointActivity"}).then(function(){e.$toast("验证码已发送，请注意查收");var t=[e.wait,e.smsButtonText],a=t[0];e.clickDisabled=!0,e.smsButtonText=e.wait+"秒...";var n=window.setInterval(function(){e.wait--,e.smsButtonText=e.wait+"秒...",e.wait<0&&(window.clearInterval(n),e.smsButtonText="重新获取验证码",e.wait=a,e.clickDisabled=!1)},1e3)}).catch(function(t){e.$toast(t)})},activityForm:function(){var t=this;if(document.body.scrollTop=0,document.documentElement.scrollTop=0,this.handleFormSubmit(this.$refs.activityForm,this.form)){var e=this.$store.getters["authorization/getUserLoginResponse"].data.token;n.a.postRequest(i.a.activity.submitActivity(this.eventId),{eventId:this.eventId,phone:this.form.phoneNumber.value,name:this.form.name.value,numbers:this.form.numbers.value,VerificationCode:this.form.smsCode.value,reserveDate:this.form.date.value},e).then(function(e){e&&"true"==e.success?t.showConfirmPopup=!t.showConfirmPopup:t.$toast(e.exception||"报名失败")})}},makeConfirm:function(){this.showConfirmPopup=!this.showConfirmPopup,this.$router.back()}}}}).call(e,a("M4fF"))},J0Di:function(t,e,a){var n=a("sze3");"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);a("rjj0")("001aeac8",n,!1,{sourceMap:!1})},bNjY:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a("HdIc"),i=a("cfM8"),o=!1;var s=function(t){o||(a("GglB"),a("J0Di"))},r=a("VU/8")(n.a,i.a,!1,s,"data-v-7bc2a07a",null);r.options.__file="pages\\activity\\signupProject.vue",e.default=r.exports},cfM8:function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"signupProject"},[a("div",[a("van-nav-bar",{attrs:{"left-arrow":"",title:this.$route.query.title||"报名页",id:"navbar"},on:{"click-left":function(e){t.$router.back()}}}),a("div",{staticClass:"defaultInfo"},[a("p",{staticClass:"name"},[a("span",[t._v(t._s(this.$route.query.title))])]),a("p",{staticClass:"startTime"},[a("label",{attrs:{for:""}},[t._v("开始时间：")]),a("span",[t._v(t._s(t._f("formatDateAndMini")(this.$route.query.startTime)))])]),a("p",{staticClass:"endTime"},[a("label",{attrs:{for:""}},[t._v("结束时间：")]),a("span",[t._v(t._s(t._f("formatDateAndMini")(this.$route.query.endTime)))])])]),a("form",{ref:"activityForm",staticClass:"activityForm",on:{submit:function(t){t.preventDefault()}}},[a("p",{staticClass:"title"},[t._v("填写报名信息")]),a("div",{staticClass:"field"},[a("div",{staticClass:"control"},[a("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.form.name.value,expression:"form.name.value",modifiers:{trim:!0}}],staticClass:"input is-radiusless is-shadowless",class:t.form.name.isvaild?"":"is-danger",attrs:{name:"name",autocomplete:"on",type:"text",placeholder:"请输入姓名"},domProps:{value:t.form.name.value},on:{change:t.onChange,input:function(e){e.target.composing||t.$set(t.form.name,"value",e.target.value.trim())},blur:function(e){t.$forceUpdate()}}})]),t.form.name.isvaild?t._e():a("p",{staticClass:"help is-danger"},[t._v(t._s(t.form.name.message))])]),a("div",{staticClass:"field"},[a("div",{staticClass:"control"},[a("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.form.phoneNumber.value,expression:"form.phoneNumber.value",modifiers:{trim:!0}}],staticClass:"input is-radiusless is-shadowless",class:t.form.phoneNumber.isvaild?"":"is-danger",attrs:{name:"phoneNumber",autocomplete:"on",type:"text",placeholder:"请输入您的联系电话"},domProps:{value:t.form.phoneNumber.value},on:{change:t.onChange,input:function(e){e.target.composing||t.$set(t.form.phoneNumber,"value",e.target.value.trim())},blur:function(e){t.$forceUpdate()}}})]),t.form.phoneNumber.isvaild?t._e():a("p",{staticClass:"help is-danger"},[t._v(t._s(t.form.phoneNumber.message))])]),a("div",{staticClass:"field"},[a("div",{staticClass:"control"},[a("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.form.numbers.value,expression:"form.numbers.value",modifiers:{trim:!0}}],staticClass:"input is-radiusless is-shadowless",class:t.form.numbers.isvaild?"":"is-danger",attrs:{name:"numbers",autocomplete:"on",type:"text",placeholder:"填写活动参与人数"},domProps:{value:t.form.numbers.value},on:{change:t.onChange,input:function(e){e.target.composing||t.$set(t.form.numbers,"value",e.target.value.trim())},blur:function(e){t.$forceUpdate()}}})]),t.form.numbers.isvaild?t._e():a("p",{staticClass:"help is-danger"},[t._v(t._s(t.form.numbers.message))])]),a("div",{staticClass:"field"},[a("div",{staticClass:"control"},[a("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.form.date.value,expression:"form.date.value",modifiers:{trim:!0}}],staticClass:"input is-radiusless is-shadowless",class:t.form.date.isvaild?"":"is-danger",attrs:{name:"date",autocomplete:"on",type:"type",readonly:"readonly",placeholder:"填写活动参与日期"},domProps:{value:t.form.date.value},on:{change:t.onChange,click:t.changeDate,input:function(e){e.target.composing||t.$set(t.form.date,"value",e.target.value.trim())},blur:function(e){t.$forceUpdate()}}})]),t.form.date.isvaild?t._e():a("p",{staticClass:"help is-danger"},[t._v(t._s(t.form.date.message))])]),a("van-field",{attrs:{name:"smsCode",center:"",clearable:"","error-message":t.form.smsCode.isvaild?"":t.form.smsCode.message,placeholder:"请输入短信验证码"},model:{value:t.form.smsCode.value,callback:function(e){t.$set(t.form.smsCode,"value","string"==typeof e?e.trim():e)},expression:"form.smsCode.value"}},[a("van-button",{attrs:{slot:"button",size:"small",type:"danger",disabled:t.clickDisabled},on:{click:t.sendSMSCode},slot:"button"},[t._v(t._s(t.smsButtonText))])],1),a("van-popup",{attrs:{position:"bottom"},model:{value:t.showDatePopup,callback:function(e){t.showDatePopup=e},expression:"showDatePopup"}},[a("van-datetime-picker",{attrs:{type:"date","min-date":t.minDate,"max-date":t.maxDate},on:{cancel:t.closeDataPopup,confirm:t.getValues,change:t.change},model:{value:t.currentDate,callback:function(e){t.currentDate=e},expression:"currentDate"}})],1)],1),a("div",{staticClass:"button-section"},[a("van-button",{attrs:{type:"danger",size:"normal",block:""},on:{click:function(e){return e.stopPropagation(),t.activityForm(e)}}},[t._v("提交报名")])],1)],1),a("van-popup",{staticClass:"confirm-popup",attrs:{position:t.bottom},model:{value:t.showConfirmPopup,callback:function(e){t.showConfirmPopup=e},expression:"showConfirmPopup"}},[a("div",{staticClass:"confirm-details"},[a("div",{staticClass:"confirm-title"},[a("van-icon",{attrs:{name:"checked",size:"6em",color:"#FF6E6E"}}),a("h3",[t._v("恭喜您，报名成功")])],1),a("div",{staticClass:"confirm-content"},[t._v("\n                您已报名成功，您可以在用户中心我的预约中查看。我们工作人员会在12小时内和您联系。\n            ")]),a("div",{staticClass:"button-section"},[a("van-button",{attrs:{block:"",type:"warning"},on:{click:function(e){return e.stopPropagation(),t.makeConfirm(e)}}},[t._v("确定")])],1)])])],1)};n._withStripped=!0;var i={render:n,staticRenderFns:[]};e.a=i},sze3:function(t,e,a){(t.exports=a("FZ+f")(!1)).push([t.i,"\n.activityForm .van-cell {\n  padding: 0;\n}\n.activityForm .van-cell .van-field__body {\n    width: 100%;\n    background: #f4f4f4;\n    padding: 8px 9px;\n}\n.activityForm .van-field input {\n  font-size: 1rem;\n}\n.activityForm .van-field input::-webkit-input-placeholder {\n    color: #bcbcbc;\n    font-weight: 100;\n}\n",""])}});