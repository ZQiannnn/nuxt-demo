webpackJsonp([77],{"/5nf":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a("enoQ"),n=a("Wvwi"),o=!1;var s=function(t){o||a("B2FR")},r=a("VU/8")(i.a,n.a,!1,s,"data-v-a5b597c6",null);r.options.__file="pages\\mine\\account\\authorization\\index.vue",e.default=r.exports},B2FR:function(t,e,a){var i=a("iuA1");"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);a("rjj0")("1b9afee1",i,!1,{sourceMap:!1})},Wvwi:function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"mine-authorization"}},[a("van-nav-bar",{attrs:{"left-arrow":"",title:"登录/注册",id:"navbar"},on:{"click-left":function(e){t.$router.back()}}}),a("div",{attrs:{id:"mine-authorization-wrap"}},[a("h3",[t._v("手机号码快捷登录")]),a("p",{staticClass:"help description"},[t._v("未注册的手机号将自动创建账号")]),a("form",{ref:"authorizationForm",on:{submit:function(t){t.preventDefault()}}},[a("div",{staticClass:"field"},[a("div",{staticClass:"control"},[a("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.form.phoneNumber.value,expression:"form.phoneNumber.value",modifiers:{trim:!0}}],staticClass:"input is-radiusless is-shadowless",class:t.form.phoneNumber.isvaild?"":"is-danger",attrs:{name:"phoneNumber",autocomplete:"on",type:"text",placeholder:"请输入手机号"},domProps:{value:t.form.phoneNumber.value},on:{change:t.onChange,input:function(e){e.target.composing||t.$set(t.form.phoneNumber,"value",e.target.value.trim())},blur:function(e){t.$forceUpdate()}}})]),t.form.phoneNumber.isvaild?t._e():a("p",{staticClass:"help is-danger"},[t._v(t._s(t.form.phoneNumber.message))])]),a("div",{staticClass:"field is-grouped"},[a("p",{staticClass:"control is-expanded"},[a("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.form.smsCode.value,expression:"form.smsCode.value",modifiers:{trim:!0}}],staticClass:"input is-radiusless is-shadowless",class:t.form.smsCode.isvaild?"":"is-danger",attrs:{type:"text",name:"smsCode",maxlength:"6",placeholder:"请输入验证码"},domProps:{value:t.form.smsCode.value},on:{change:t.onChange,input:function(e){e.target.composing||t.$set(t.form.smsCode,"value",e.target.value.trim())},blur:function(e){t.$forceUpdate()}}})]),a("p",{staticClass:"control"},[a("a",{staticClass:"button is-danger is-radiusless is-shadowless",attrs:{disabled:t.clickDisabled},on:{click:t.sendSMSCode}},[t._v("\n\t\t\t\t\t\t\t"+t._s(t.smsButtonText)+"\n\t\t\t\t\t\t")])])]),t.form.smsCode.isvaild?t._e():a("p",{staticClass:"help is-danger"},[t._v(t._s(t.form.smsCode.message))]),a("div",{staticClass:"button-section"},[a("van-cell-group",[a("van-cell",[a("van-checkbox",{attrs:{slot:"icon"},slot:"icon",model:{value:t.loginFree,callback:function(e){t.loginFree=e},expression:"loginFree"}}),a("p",{staticStyle:{"margin-left":"5px"},attrs:{slot:"title"},slot:"title"},[t._v("30天内免登录")])],1)],1),a("van-cell-group",[a("van-cell",[a("van-checkbox",{attrs:{slot:"icon"},slot:"icon",model:{value:t.checked,callback:function(e){t.checked=e},expression:"checked"}}),a("p",{staticStyle:{"margin-left":"5px"},attrs:{slot:"title"},slot:"title"},[t._v("\n                                我已阅读并同意\n                                "),a("nuxt-link",{staticClass:"content-title",attrs:{to:{name:"cms-slug",params:{slug:"网站免责声明"},query:{code:"SYS_WSMZSM_MOB"}}}},[t._v("\n                                    《网站免责声明》\n                                ")])],1)],1)],1),a("van-button",{attrs:{type:"danger",size:"large"},on:{click:t.authorizationForm}},[t._v("下一步")])],1)])])],1)};i._withStripped=!0;var n={render:i,staticRenderFns:[]};e.a=n},enoQ:function(t,e,a){"use strict";var i=a("Dd8w"),n=a.n(i),o=a("M4fF"),s=a.n(o),r=a("NYxO");a("62+5"),a("IdIt");e.a={layout:"notabbar",middleware:"noAuthorizationRequired",head:function(){return{style:[{cssText:"html { height: 100%; }",type:"text/css"}],bodyAttrs:{id:"authorization"}}},data:function(){return{form:{phoneNumber:{value:"",message:null,isvaild:!0},smsCode:{value:"",message:null,isvaild:!0}},wait:60,smsButtonText:"获取验证码",clickDisabled:!1,checked:!0,loginFree:!0}},computed:n()({},Object(r.mapGetters)({getVisitPath:"authorization/getVisitPath"})),methods:{is_weixin:function(){return"micromessenger"==navigator.userAgent.toLowerCase().match(/MicroMessenger/i)},onChange:function(t){this.onChangeValidator(t)},sendSMSCode:function(){var t=this;this.clickDisabled||this.signleValidator(this.$refs.authorizationForm,s.a.omit(this.form,"smsCode"))&&this.$store.dispatch("sms/sendSMSCode",{mobile:this.form.phoneNumber.value,type:"login"}).then(function(){t.$toast("验证码已发送，请注意查收");var e=[t.wait,t.smsButtonText],a=e[0],i=e[1];t.clickDisabled=!0,t.smsButtonText=t.wait+"秒...";var n=window.setInterval(function(){t.wait--,t.smsButtonText=t.wait+"秒...",t.wait<0&&(window.clearInterval(n),t.smsButtonText=i,t.wait=a,t.clickDisabled=!1)},1e3)}).catch(function(e){t.$toast(e)})},authorizationForm:function(){var t=this;if(this.handleFormSubmit(this.$refs.authorizationForm,this.form))if(this.checked){var e="";e=this.loginFree?"bW9iaWxlXzMwOjg4ODg4ODg4":"bW9iaWxlOjg4ODg4ODg4=",this.$store.dispatch("authorization/login",{mobile:this.form.phoneNumber.value,verificationCode:this.form.smsCode.value},e).then(function(e){t.$toast({duration:2e3,forbidClick:!0,message:"关注【时代家】微信公众号，获取更多时代中国购房优惠"});var a=t.getVisitPath||"/mine/account";setTimeout(function(){t.$router.replace(a)},500)}).catch(function(e){t.$toast(e)})}else this.$toast("请阅读并同意《网站免责声明》")}}}},iuA1:function(t,e,a){(t.exports=a("FZ+f")(!1)).push([t.i,"\n#mine-authorization-wrap[data-v-a5b597c6] {\n  padding: 15PX;\n}\n#mine-authorization-wrap h3[data-v-a5b597c6] {\n    font-size: 0.96rem;\n    color: #ba1c28;\n    margin-bottom: 0.4rem;\n}\n#mine-authorization-wrap p.description[data-v-a5b597c6] {\n    font-size: 0.64rem;\n    color: #b2b2b2;\n}\n#mine-authorization form[data-v-a5b597c6] {\n  margin: 1.33333rem 0;\n}\n#mine-authorization form .field[data-v-a5b597c6] {\n    margin-top: 1.33333rem;\n    margin-bottom: 0;\n}\n#mine-authorization form .field input[data-v-a5b597c6] {\n      height: 2.4rem;\n      background: #f4f4f4;\n      font-size: 0.74667rem;\n      color: #7a7a7a;\n}\n#mine-authorization form .field .button[data-v-a5b597c6] {\n      background: #ff6e6e;\n      font-size: 0.74667rem;\n      height: 2.4rem;\n}\n#mine-authorization form .button-section[data-v-a5b597c6] {\n    margin: 4rem 0.93333rem 0 0.93333rem;\n}\n#mine-authorization form .button-section p[data-v-a5b597c6] {\n      font-size: 0.69333rem;\n}\n",""])}});